{"version":3,"file":"popup.js","sources":["../../src/popup/instagram_connector.js","../../src/shared/credentials.js","../../node_modules/rollup-plugin-node-polyfills/polyfills/global.js","../../node_modules/rollup-plugin-node-polyfills/polyfills/buffer-es6.js","../../src/shared/amplitude.js","../../node_modules/amplitude-js/amplitude.js","../../src/popup/view.js","../../src/popup/ui.js"],"sourcesContent":["export class InstagramError extends Error {\n  constructor (status, error = '') {\n    super(error)\n    this.status = status\n    this.error = error\n    this.message = `InstagramError ${status}: ${error.response ? error.response.message : error.message}`\n    this.response = error.response\n  }\n}\n\nexport class TimeoutError extends Error {}\n\nexport class InstagramConnector {\n  constructor () {\n    this.isStopped = false\n    this.isConnected = false\n\n    this.init = async () => {\n      try {\n        const ping = await this.request({\n          method: 'ping',\n        })\n\n        console.log('ping', ping)\n\n        this.isConnected = ping.status === 'ok' && Boolean(ping.pong)\n      } catch (err) {\n        if (err instanceof TimeoutError) {\n          this.isConnected = false\n          return\n        }\n\n        throw err\n      }\n    }\n\n    this.start = () => (this.isStopped = false)\n    this.kill = () => (this.isStopped = true)\n  }\n\n  request (data) {\n    return new Promise((resolve, reject) => {\n      if (this.isStopped) return reject(new Error('Request was killed'))\n\n      // { method, params } = method\n\n      const req_id = Date.now()\n\n      const handler = (message, sender) => {\n        const { status, error } = message\n\n        if (message.req_id && req_id !== message.req_id) return\n\n        chrome.runtime.onMessage && chrome.runtime.onMessage.removeListener(handler)\n\n        console.log('request', data.method, '->', status, message)\n\n        console.log(status, error)\n\n        if (status !== 'ok') {\n          reject(new InstagramError(status, error))\n        } else {\n          resolve(message)\n        }\n      }\n\n      setTimeout(() => reject(new TimeoutError('Request timeout')), 10000)\n\n      chrome.runtime.onMessage && chrome.runtime.onMessage.addListener(handler)\n\n      console.log('send_message', null, { req_id, ...data })\n      chrome.runtime.sendMessage(null, { req_id, ...data })\n    })\n  }\n}\n\nexport const instagram = new InstagramConnector()\n\nwindow.instagram = instagram\n\nexport default instagram\n","/* eslint-disable prefer-promise-reject-errors */\nexport const saveCredentials = (username, password) => {\n  return new Promise((resolve, reject) => {\n    chrome.storage.local.set({ credentials: { username, password } }, () => {\n      resolve({ username, password })\n    })\n\n    setTimeout(() => reject('storage error'), 5000)\n  })\n}\n\nexport const getCredentials = () => {\n  return new Promise((resolve, reject) => {\n    chrome.storage.local.get(['credentials'], result => {\n      resolve(result.credentials)\n    })\n\n    setTimeout(() => reject('storage error'), 5000)\n  })\n}\n\nexport const clearCredentials = () => {\n  return new Promise((resolve, reject) => {\n    chrome.storage.local.set({ credentials: null }, result => {\n      resolve(result)\n    })\n\n    setTimeout(() => reject('storage error'), 5000)\n  })\n}\n\nwindow.saveCredentials = saveCredentials\nwindow.getCredentials = getCredentials\nwindow.clearCredentials = clearCredentials\n","export default (typeof global !== \"undefined\" ? global :\n  typeof self !== \"undefined\" ? self :\n  typeof window !== \"undefined\" ? window : {});","var lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i];\n    revLookup[code.charCodeAt(i)] = i;\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62;\n  revLookup['_'.charCodeAt(0)] = 63;\n}\n\nfunction toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr;\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0;\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders);\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len;\n\n  var L = 0;\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)];\n    arr[L++] = (tmp >> 16) & 0xFF;\n    arr[L++] = (tmp >> 8) & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4);\n    arr[L++] = tmp & 0xFF;\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2);\n    arr[L++] = (tmp >> 8) & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2]);\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n  var output = '';\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)));\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    output += lookup[tmp >> 2];\n    output += lookup[(tmp << 4) & 0x3F];\n    output += '==';\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1]);\n    output += lookup[tmp >> 10];\n    output += lookup[(tmp >> 4) & 0x3F];\n    output += lookup[(tmp << 2) & 0x3F];\n    output += '=';\n  }\n\n  parts.push(output);\n\n  return parts.join('')\n}\n\nfunction read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? (nBytes - 1) : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n\n  i += d;\n\n  e = s & ((1 << (-nBits)) - 1);\n  s >>= (-nBits);\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1);\n  e >>= (-nBits);\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nfunction write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0);\n  var i = isLE ? 0 : (nBytes - 1);\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n}\n\nvar toString = {}.toString;\n\nvar isArray = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\nvar INSPECT_MAX_BYTES = 50;\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : true;\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nvar _kMaxLength = kMaxLength();\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n    that.length = length;\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr\n};\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size);\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n};\n\nfunction allocUnsafe (that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n};\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0;\n  }\n  return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n};\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n};\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i;\n  if (length === undefined) {\n    length = 0;\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n  return buffer\n};\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\nBuffer.byteLength = byteLength;\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false;\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0;\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true;\n\nfunction swap (b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length;\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n  return this\n};\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length;\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n  return this\n};\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length;\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n  return this\n};\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0;\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n};\n\nBuffer.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n};\n\nBuffer.prototype.inspect = function inspect () {\n  var str = '';\n  var max = INSPECT_MAX_BYTES;\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n  return '<Buffer ' + str + '>'\n};\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n};\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n  byteOffset = +byteOffset;  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1);\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i;\n  if (dir) {\n    var foundIndex = -1;\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n};\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n};\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n    if (length > remaining) {\n      length = remaining;\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed;\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0;\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0;\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n};\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return fromByteArray(buf)\n  } else {\n    return fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n\n  var i = start;\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1];\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F);\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F);\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F);\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length;\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = '';\n  var i = 0;\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    );\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length;\n\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n\n  var out = '';\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n\n  var newBuf;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf\n};\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val\n};\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset]\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | (this[offset + 1] << 8)\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return (this[offset] << 8) | this[offset + 1]\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n};\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val\n};\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val\n};\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | (this[offset + 1] << 8);\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | (this[offset] << 8);\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, true, 23, 4)\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, false, 23, 4)\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, true, 52, 8)\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, false, 52, 8)\n};\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = (value & 0xff);\n  return offset + 1\n};\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8);\n    this[offset + 1] = (value & 0xff);\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2\n};\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24);\n    this[offset + 2] = (value >>> 16);\n    this[offset + 1] = (value >>> 8);\n    this[offset] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24);\n    this[offset + 1] = (value >>> 16);\n    this[offset + 2] = (value >>> 8);\n    this[offset + 3] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = (value & 0xff);\n  return offset + 1\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8);\n    this[offset + 1] = (value & 0xff);\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n    this[offset + 2] = (value >>> 16);\n    this[offset + 3] = (value >>> 24);\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24);\n    this[offset + 1] = (value >>> 16);\n    this[offset + 2] = (value >>> 8);\n    this[offset + 3] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4\n};\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4);\n  }\n  write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n};\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8);\n  }\n  write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n};\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start;\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length;\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    );\n  }\n\n  return len\n};\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n      if (code < 256) {\n        val = code;\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n\n  if (!val) val = 0;\n\n  var i;\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this\n};\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i);\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint;\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null;\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      );\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      );\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      );\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i];\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nfunction isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n\nexport { Buffer, INSPECT_MAX_BYTES, SlowBuffer, isBuffer, _kMaxLength as kMaxLength };\n","import amplitude from 'amplitude-js'\n\nexport const instance = amplitude.getInstance()\n\ninstance.init('42ca3c6562cdbef619110c8b1d8bcfec')\n\nexport const logEvent = (name, eventProperties) => {\n  try {\n    instance.logEvent(name, eventProperties)\n  } catch (err) {\n    console.log('AmplitudeError', err)\n  }\n}\n\nexport const identify = (key, value) => {\n  try {\n    const identify = new amplitude.Identify().add(key, value)\n    instance.identify(identify)\n  } catch (err) {\n    console.log('AmplitudeError', err)\n  }\n}\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define('amplitude', factory) :\n  (global = global || self, global.amplitude = factory());\n}(this, function () { 'use strict';\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n        }));\n      }\n\n      ownKeys.forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  var Constants = {\n    DEFAULT_INSTANCE: '$default_instance',\n    API_VERSION: 2,\n    MAX_STRING_LENGTH: 4096,\n    MAX_PROPERTY_KEYS: 1000,\n    IDENTIFY_EVENT: '$identify',\n    GROUP_IDENTIFY_EVENT: '$groupidentify',\n    // localStorageKeys\n    LAST_EVENT_ID: 'amplitude_lastEventId',\n    LAST_EVENT_TIME: 'amplitude_lastEventTime',\n    LAST_IDENTIFY_ID: 'amplitude_lastIdentifyId',\n    LAST_SEQUENCE_NUMBER: 'amplitude_lastSequenceNumber',\n    SESSION_ID: 'amplitude_sessionId',\n    // Used in cookie as well\n    DEVICE_ID: 'amplitude_deviceId',\n    OPT_OUT: 'amplitude_optOut',\n    USER_ID: 'amplitude_userId',\n    COOKIE_TEST: 'amplitude_cookie_test',\n    // revenue keys\n    REVENUE_EVENT: 'revenue_amount',\n    REVENUE_PRODUCT_ID: '$productId',\n    REVENUE_QUANTITY: '$quantity',\n    REVENUE_PRICE: '$price',\n    REVENUE_REVENUE_TYPE: '$revenueType',\n    AMP_DEVICE_ID_PARAM: 'amp_device_id',\n    // url param\n    REFERRER: 'referrer',\n    // UTM Params\n    UTM_SOURCE: 'utm_source',\n    UTM_MEDIUM: 'utm_medium',\n    UTM_CAMPAIGN: 'utm_campaign',\n    UTM_TERM: 'utm_term',\n    UTM_CONTENT: 'utm_content'\n  };\n\n  /* jshint bitwise: false */\n\n  /*\n   * UTF-8 encoder/decoder\n   * http://www.webtoolkit.info/\n   */\n  var UTF8 = {\n    encode: function encode(s) {\n      var utftext = '';\n\n      for (var n = 0; n < s.length; n++) {\n        var c = s.charCodeAt(n);\n\n        if (c < 128) {\n          utftext += String.fromCharCode(c);\n        } else if (c > 127 && c < 2048) {\n          utftext += String.fromCharCode(c >> 6 | 192);\n          utftext += String.fromCharCode(c & 63 | 128);\n        } else {\n          utftext += String.fromCharCode(c >> 12 | 224);\n          utftext += String.fromCharCode(c >> 6 & 63 | 128);\n          utftext += String.fromCharCode(c & 63 | 128);\n        }\n      }\n\n      return utftext;\n    },\n    decode: function decode(utftext) {\n      var s = '';\n      var i = 0;\n      var c = 0,\n          c1 = 0,\n          c2 = 0;\n\n      while (i < utftext.length) {\n        c = utftext.charCodeAt(i);\n\n        if (c < 128) {\n          s += String.fromCharCode(c);\n          i++;\n        } else if (c > 191 && c < 224) {\n          c1 = utftext.charCodeAt(i + 1);\n          s += String.fromCharCode((c & 31) << 6 | c1 & 63);\n          i += 2;\n        } else {\n          c1 = utftext.charCodeAt(i + 1);\n          c2 = utftext.charCodeAt(i + 2);\n          s += String.fromCharCode((c & 15) << 12 | (c1 & 63) << 6 | c2 & 63);\n          i += 3;\n        }\n      }\n\n      return s;\n    }\n  };\n\n  /* jshint bitwise: false */\n  /*\n   * Base64 encoder/decoder\n   * http://www.webtoolkit.info/\n   */\n\n  var Base64 = {\n    _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n    encode: function encode(input) {\n      try {\n        if (window.btoa && window.atob) {\n          return window.btoa(unescape(encodeURIComponent(input)));\n        }\n      } catch (e) {//log(e);\n      }\n\n      return Base64._encode(input);\n    },\n    _encode: function _encode(input) {\n      var output = '';\n      var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n      var i = 0;\n      input = UTF8.encode(input);\n\n      while (i < input.length) {\n        chr1 = input.charCodeAt(i++);\n        chr2 = input.charCodeAt(i++);\n        chr3 = input.charCodeAt(i++);\n        enc1 = chr1 >> 2;\n        enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n        enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n          enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n          enc4 = 64;\n        }\n\n        output = output + Base64._keyStr.charAt(enc1) + Base64._keyStr.charAt(enc2) + Base64._keyStr.charAt(enc3) + Base64._keyStr.charAt(enc4);\n      }\n\n      return output;\n    },\n    decode: function decode(input) {\n      try {\n        if (window.btoa && window.atob) {\n          return decodeURIComponent(escape(window.atob(input)));\n        }\n      } catch (e) {//log(e);\n      }\n\n      return Base64._decode(input);\n    },\n    _decode: function _decode(input) {\n      var output = '';\n      var chr1, chr2, chr3;\n      var enc1, enc2, enc3, enc4;\n      var i = 0;\n      input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n      while (i < input.length) {\n        enc1 = Base64._keyStr.indexOf(input.charAt(i++));\n        enc2 = Base64._keyStr.indexOf(input.charAt(i++));\n        enc3 = Base64._keyStr.indexOf(input.charAt(i++));\n        enc4 = Base64._keyStr.indexOf(input.charAt(i++));\n        chr1 = enc1 << 2 | enc2 >> 4;\n        chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n        chr3 = (enc3 & 3) << 6 | enc4;\n        output = output + String.fromCharCode(chr1);\n\n        if (enc3 !== 64) {\n          output = output + String.fromCharCode(chr2);\n        }\n\n        if (enc4 !== 64) {\n          output = output + String.fromCharCode(chr3);\n        }\n      }\n\n      output = UTF8.decode(output);\n      return output;\n    }\n  };\n\n  /**\n   * toString ref.\n   * @private\n   */\n  var toString = Object.prototype.toString;\n  /**\n   * Return the type of `val`.\n   * @private\n   * @param {Mixed} val\n   * @return {String}\n   * @api public\n   */\n\n  function type (val) {\n    switch (toString.call(val)) {\n      case '[object Date]':\n        return 'date';\n\n      case '[object RegExp]':\n        return 'regexp';\n\n      case '[object Arguments]':\n        return 'arguments';\n\n      case '[object Array]':\n        return 'array';\n\n      case '[object Error]':\n        return 'error';\n    }\n\n    if (val === null) {\n      return 'null';\n    }\n\n    if (val === undefined) {\n      return 'undefined';\n    }\n\n    if (val !== val) {\n      return 'nan';\n    }\n\n    if (val && val.nodeType === 1) {\n      return 'element';\n    }\n\n    if (typeof Buffer !== 'undefined' && typeof Buffer.isBuffer === 'function' && Buffer.isBuffer(val)) {\n      return 'buffer';\n    }\n\n    val = val.valueOf ? val.valueOf() : Object.prototype.valueOf.apply(val);\n    return _typeof(val);\n  }\n\n  var logLevels = {\n    DISABLE: 0,\n    ERROR: 1,\n    WARN: 2,\n    INFO: 3\n  };\n  var logLevel = logLevels.WARN;\n\n  var setLogLevel = function setLogLevel(logLevelName) {\n    if (logLevels.hasOwnProperty(logLevelName)) {\n      logLevel = logLevels[logLevelName];\n    }\n  };\n\n  var getLogLevel = function getLogLevel() {\n    return logLevel;\n  };\n\n  var log = {\n    error: function error(s) {\n      if (logLevel >= logLevels.ERROR) {\n        _log(s);\n      }\n    },\n    warn: function warn(s) {\n      if (logLevel >= logLevels.WARN) {\n        _log(s);\n      }\n    },\n    info: function info(s) {\n      if (logLevel >= logLevels.INFO) {\n        _log(s);\n      }\n    }\n  };\n\n  var _log = function _log(s) {\n    try {\n      console.log('[Amplitude] ' + s);\n    } catch (e) {// console logging not available\n    }\n  };\n\n  var isEmptyString = function isEmptyString(str) {\n    return !str || str.length === 0;\n  };\n\n  var sessionStorageEnabled = function sessionStorageEnabled() {\n    try {\n      if (window.sessionStorage) {\n        return true;\n      }\n    } catch (e) {} // sessionStorage disabled\n\n\n    return false;\n  }; // truncate string values in event and user properties so that request size does not get too large\n\n\n  var truncate = function truncate(value) {\n    if (type(value) === 'array') {\n      for (var i = 0; i < value.length; i++) {\n        value[i] = truncate(value[i]);\n      }\n    } else if (type(value) === 'object') {\n      for (var key in value) {\n        if (value.hasOwnProperty(key)) {\n          value[key] = truncate(value[key]);\n        }\n      }\n    } else {\n      value = _truncateValue(value);\n    }\n\n    return value;\n  };\n\n  var _truncateValue = function _truncateValue(value) {\n    if (type(value) === 'string') {\n      return value.length > Constants.MAX_STRING_LENGTH ? value.substring(0, Constants.MAX_STRING_LENGTH) : value;\n    }\n\n    return value;\n  };\n\n  var validateInput = function validateInput(input, name, expectedType) {\n    if (type(input) !== expectedType) {\n      log.error('Invalid ' + name + ' input type. Expected ' + expectedType + ' but received ' + type(input));\n      return false;\n    }\n\n    return true;\n  }; // do some basic sanitization and type checking, also catch property dicts with more than 1000 key/value pairs\n\n\n  var validateProperties = function validateProperties(properties) {\n    var propsType = type(properties);\n\n    if (propsType !== 'object') {\n      log.error('Error: invalid properties format. Expecting Javascript object, received ' + propsType + ', ignoring');\n      return {};\n    }\n\n    if (Object.keys(properties).length > Constants.MAX_PROPERTY_KEYS) {\n      log.error('Error: too many properties (more than 1000), ignoring');\n      return {};\n    }\n\n    var copy = {}; // create a copy with all of the valid properties\n\n    for (var property in properties) {\n      if (!properties.hasOwnProperty(property)) {\n        continue;\n      } // validate key\n\n\n      var key = property;\n      var keyType = type(key);\n\n      if (keyType !== 'string') {\n        key = String(key);\n        log.warn('WARNING: Non-string property key, received type ' + keyType + ', coercing to string \"' + key + '\"');\n      } // validate value\n\n\n      var value = validatePropertyValue(key, properties[property]);\n\n      if (value === null) {\n        continue;\n      }\n\n      copy[key] = value;\n    }\n\n    return copy;\n  };\n\n  var invalidValueTypes = ['nan', 'function', 'arguments', 'regexp', 'element'];\n\n  var validatePropertyValue = function validatePropertyValue(key, value) {\n    var valueType = type(value);\n\n    if (invalidValueTypes.indexOf(valueType) !== -1) {\n      log.warn('WARNING: Property key \"' + key + '\" with invalid value type ' + valueType + ', ignoring');\n      value = null;\n    } else if (valueType === 'undefined') {\n      value = null;\n    } else if (valueType === 'error') {\n      value = String(value);\n      log.warn('WARNING: Property key \"' + key + '\" with value type error, coercing to ' + value);\n    } else if (valueType === 'array') {\n      // check for nested arrays or objects\n      var arrayCopy = [];\n\n      for (var i = 0; i < value.length; i++) {\n        var element = value[i];\n        var elemType = type(element);\n\n        if (elemType === 'array') {\n          log.warn('WARNING: Cannot have ' + elemType + ' nested in an array property value, skipping');\n          continue;\n        } else if (elemType === 'object') {\n          arrayCopy.push(validateProperties(element));\n        } else {\n          arrayCopy.push(validatePropertyValue(key, element));\n        }\n      }\n\n      value = arrayCopy;\n    } else if (valueType === 'object') {\n      value = validateProperties(value);\n    }\n\n    return value;\n  };\n\n  var validateGroups = function validateGroups(groups) {\n    var groupsType = type(groups);\n\n    if (groupsType !== 'object') {\n      log.error('Error: invalid groups format. Expecting Javascript object, received ' + groupsType + ', ignoring');\n      return {};\n    }\n\n    var copy = {}; // create a copy with all of the valid properties\n\n    for (var group in groups) {\n      if (!groups.hasOwnProperty(group)) {\n        continue;\n      } // validate key\n\n\n      var key = group;\n      var keyType = type(key);\n\n      if (keyType !== 'string') {\n        key = String(key);\n        log.warn('WARNING: Non-string groupType, received type ' + keyType + ', coercing to string \"' + key + '\"');\n      } // validate value\n\n\n      var value = validateGroupName(key, groups[group]);\n\n      if (value === null) {\n        continue;\n      }\n\n      copy[key] = value;\n    }\n\n    return copy;\n  };\n\n  var validateGroupName = function validateGroupName(key, groupName) {\n    var groupNameType = type(groupName);\n\n    if (groupNameType === 'string') {\n      return groupName;\n    }\n\n    if (groupNameType === 'date' || groupNameType === 'number' || groupNameType === 'boolean') {\n      groupName = String(groupName);\n      log.warn('WARNING: Non-string groupName, received type ' + groupNameType + ', coercing to string \"' + groupName + '\"');\n      return groupName;\n    }\n\n    if (groupNameType === 'array') {\n      // check for nested arrays or objects\n      var arrayCopy = [];\n\n      for (var i = 0; i < groupName.length; i++) {\n        var element = groupName[i];\n        var elemType = type(element);\n\n        if (elemType === 'array' || elemType === 'object') {\n          log.warn('WARNING: Skipping nested ' + elemType + ' in array groupName');\n          continue;\n        } else if (elemType === 'string') {\n          arrayCopy.push(element);\n        } else if (elemType === 'date' || elemType === 'number' || elemType === 'boolean') {\n          element = String(element);\n          log.warn('WARNING: Non-string groupName, received type ' + elemType + ', coercing to string \"' + element + '\"');\n          arrayCopy.push(element);\n        }\n      }\n\n      return arrayCopy;\n    }\n\n    log.warn('WARNING: Non-string groupName, received type ' + groupNameType + '. Please use strings or array of strings for groupName');\n  }; // parses the value of a url param (for example ?gclid=1234&...)\n\n\n  var getQueryParam = function getQueryParam(name, query) {\n    name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n    var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n    var results = regex.exec(query);\n    return results === null ? undefined : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n  };\n\n  var utils = {\n    setLogLevel: setLogLevel,\n    getLogLevel: getLogLevel,\n    logLevels: logLevels,\n    log: log,\n    isEmptyString: isEmptyString,\n    getQueryParam: getQueryParam,\n    sessionStorageEnabled: sessionStorageEnabled,\n    truncate: truncate,\n    validateGroups: validateGroups,\n    validateInput: validateInput,\n    validateProperties: validateProperties\n  };\n\n  var getLocation = function getLocation() {\n    return window.location;\n  };\n\n  var get = function get(name) {\n    try {\n      var ca = document.cookie.split(';');\n      var value = null;\n\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n\n        while (c.charAt(0) === ' ') {\n          c = c.substring(1, c.length);\n        }\n\n        if (c.indexOf(name) === 0) {\n          value = c.substring(name.length, c.length);\n          break;\n        }\n      }\n\n      return value;\n    } catch (e) {\n      return null;\n    }\n  };\n\n  var set = function set(name, value, opts) {\n    var expires = value !== null ? opts.expirationDays : -1;\n\n    if (expires) {\n      var date = new Date();\n      date.setTime(date.getTime() + expires * 24 * 60 * 60 * 1000);\n      expires = date;\n    }\n\n    var str = name + '=' + value;\n\n    if (expires) {\n      str += '; expires=' + expires.toUTCString();\n    }\n\n    str += '; path=/';\n\n    if (opts.domain) {\n      str += '; domain=' + opts.domain;\n    }\n\n    if (opts.secure) {\n      str += '; Secure';\n    }\n\n    document.cookie = str;\n  };\n\n  var baseCookie = {\n    set: set,\n    get: get\n  };\n\n  /*\n   * Cookie data\n   */\n  var _options = {\n    expirationDays: undefined,\n    domain: undefined\n  };\n\n  var reset = function reset() {\n    _options = {\n      expirationDays: undefined,\n      domain: undefined\n    };\n  };\n\n  var getHost = function getHost(url) {\n    var a = document.createElement('a');\n    a.href = url;\n    return a.hostname || location.hostname;\n  };\n\n  var topDomain = function topDomain(url) {\n    var host = getHost(url);\n    var parts = host.split('.');\n    var last = parts[parts.length - 1];\n    var levels = [];\n\n    if (parts.length === 4 && last === parseInt(last, 10)) {\n      return levels;\n    }\n\n    if (parts.length <= 1) {\n      return levels;\n    }\n\n    for (var i = parts.length - 2; i >= 0; --i) {\n      levels.push(parts.slice(i).join('.'));\n    }\n\n    for (var _i = 0; _i < levels.length; ++_i) {\n      var cname = '__tld_test__';\n      var domain = levels[_i];\n      var opts = {\n        domain: '.' + domain\n      };\n      baseCookie.set(cname, 1, opts);\n\n      if (baseCookie.get(cname)) {\n        baseCookie.set(cname, null, opts);\n        return domain;\n      }\n    }\n\n    return '';\n  };\n\n  var options = function options(opts) {\n    if (arguments.length === 0) {\n      return _options;\n    }\n\n    opts = opts || {};\n    _options.expirationDays = opts.expirationDays;\n    _options.secure = opts.secure;\n    var domain = !utils.isEmptyString(opts.domain) ? opts.domain : '.' + topDomain(getLocation().href);\n    var token = Math.random();\n    _options.domain = domain;\n    set$1('amplitude_test', token);\n    var stored = get$1('amplitude_test');\n\n    if (!stored || stored !== token) {\n      domain = null;\n    }\n\n    remove('amplitude_test');\n    _options.domain = domain;\n    return _options;\n  };\n\n  var _domainSpecific = function _domainSpecific(name) {\n    // differentiate between cookies on different domains\n    var suffix = '';\n\n    if (_options.domain) {\n      suffix = _options.domain.charAt(0) === '.' ? _options.domain.substring(1) : _options.domain;\n    }\n\n    return name + suffix;\n  };\n\n  var get$1 = function get(name) {\n    var nameEq = _domainSpecific(name) + '=';\n    var value = baseCookie.get(nameEq);\n\n    try {\n      if (value) {\n        return JSON.parse(Base64.decode(value));\n      }\n    } catch (e) {\n      return null;\n    }\n\n    return null;\n  };\n\n  var set$1 = function set(name, value) {\n    try {\n      baseCookie.set(_domainSpecific(name), Base64.encode(JSON.stringify(value)), _options);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  var remove = function remove(name) {\n    try {\n      baseCookie.set(_domainSpecific(name), null, _options);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  var Cookie = {\n    reset: reset,\n    options: options,\n    get: get$1,\n    set: set$1,\n    remove: remove\n  };\n\n  /* jshint -W020, unused: false, noempty: false, boss: true */\n\n  /*\n   * Implement localStorage to support Firefox 2-3 and IE 5-7\n   */\n  var localStorage; // jshint ignore:line\n\n  {\n    // test that Window.localStorage is available and works\n    var windowLocalStorageAvailable = function windowLocalStorageAvailable() {\n      var uid = new Date();\n      var result;\n\n      try {\n        window.localStorage.setItem(uid, uid);\n        result = window.localStorage.getItem(uid) === String(uid);\n        window.localStorage.removeItem(uid);\n        return result;\n      } catch (e) {// localStorage not available\n      }\n\n      return false;\n    };\n\n    if (windowLocalStorageAvailable()) {\n      localStorage = window.localStorage;\n    } else if (window.globalStorage) {\n      // Firefox 2-3 use globalStorage\n      // See https://developer.mozilla.org/en/dom/storage#globalStorage\n      try {\n        localStorage = window.globalStorage[window.location.hostname];\n      } catch (e) {// Something bad happened...\n      }\n    } else if (typeof document !== 'undefined') {\n      // IE 5-7 use userData\n      // See http://msdn.microsoft.com/en-us/library/ms531424(v=vs.85).aspx\n      var div = document.createElement('div'),\n          attrKey = 'localStorage';\n      div.style.display = 'none';\n      document.getElementsByTagName('head')[0].appendChild(div);\n\n      if (div.addBehavior) {\n        div.addBehavior('#default#userdata');\n        localStorage = {\n          length: 0,\n          setItem: function setItem(k, v) {\n            div.load(attrKey);\n\n            if (!div.getAttribute(k)) {\n              this.length++;\n            }\n\n            div.setAttribute(k, v);\n            div.save(attrKey);\n          },\n          getItem: function getItem(k) {\n            div.load(attrKey);\n            return div.getAttribute(k);\n          },\n          removeItem: function removeItem(k) {\n            div.load(attrKey);\n\n            if (div.getAttribute(k)) {\n              this.length--;\n            }\n\n            div.removeAttribute(k);\n            div.save(attrKey);\n          },\n          clear: function clear() {\n            div.load(attrKey);\n            var i = 0;\n            var attr;\n\n            while (attr = div.XMLDocument.documentElement.attributes[i++]) {\n              div.removeAttribute(attr.name);\n            }\n\n            div.save(attrKey);\n            this.length = 0;\n          },\n          key: function key(k) {\n            div.load(attrKey);\n            return div.XMLDocument.documentElement.attributes[k];\n          }\n        };\n        div.load(attrKey);\n        localStorage.length = div.XMLDocument.documentElement.attributes.length;\n      }\n    }\n\n    if (!localStorage) {\n      localStorage = {\n        length: 0,\n        setItem: function setItem(k, v) {},\n        getItem: function getItem(k) {},\n        removeItem: function removeItem(k) {},\n        clear: function clear() {},\n        key: function key(k) {}\n      };\n    }\n  }\n\n  var localStorage$1 = localStorage;\n\n  /* jshint -W020, unused: false, noempty: false, boss: true */\n\n  var cookieStorage = function cookieStorage() {\n    this.storage = null;\n  }; // test that cookies are enabled - navigator.cookiesEnabled yields false positives in IE, need to test directly\n\n\n  cookieStorage.prototype._cookiesEnabled = function () {\n    var uid = String(new Date());\n    var result;\n\n    try {\n      Cookie.set(Constants.COOKIE_TEST, uid);\n      result = Cookie.get(Constants.COOKIE_TEST) === uid;\n      Cookie.remove(Constants.COOKIE_TEST);\n      return result;\n    } catch (e) {// cookies are not enabled\n    }\n\n    return false;\n  };\n\n  cookieStorage.prototype.getStorage = function () {\n    if (this.storage !== null) {\n      return this.storage;\n    }\n\n    if (this._cookiesEnabled()) {\n      this.storage = Cookie;\n    } else {\n      // if cookies disabled, fallback to localstorage\n      // note: localstorage does not persist across subdomains\n      var keyPrefix = 'amp_cookiestore_';\n      this.storage = {\n        _options: {\n          expirationDays: undefined,\n          domain: undefined,\n          secure: false\n        },\n        reset: function reset() {\n          this._options = {\n            expirationDays: undefined,\n            domain: undefined,\n            secure: false\n          };\n        },\n        options: function options(opts) {\n          if (arguments.length === 0) {\n            return this._options;\n          }\n\n          opts = opts || {};\n          this._options.expirationDays = opts.expirationDays || this._options.expirationDays; // localStorage is specific to subdomains\n\n          this._options.domain = opts.domain || this._options.domain || window && window.location && window.location.hostname;\n          return this._options.secure = opts.secure || false;\n        },\n        get: function get(name) {\n          try {\n            return JSON.parse(localStorage$1.getItem(keyPrefix + name));\n          } catch (e) {}\n\n          return null;\n        },\n        set: function set(name, value) {\n          try {\n            localStorage$1.setItem(keyPrefix + name, JSON.stringify(value));\n            return true;\n          } catch (e) {}\n\n          return false;\n        },\n        remove: function remove(name) {\n          try {\n            localStorage$1.removeItem(keyPrefix + name);\n          } catch (e) {\n            return false;\n          }\n        }\n      };\n    }\n\n    return this.storage;\n  };\n\n  var getUtmData = function getUtmData(rawCookie, query) {\n    // Translate the utmz cookie format into url query string format.\n    var cookie = rawCookie ? '?' + rawCookie.split('.').slice(-1)[0].replace(/\\|/g, '&') : '';\n\n    var fetchParam = function fetchParam(queryName, query, cookieName, cookie) {\n      return utils.getQueryParam(queryName, query) || utils.getQueryParam(cookieName, cookie);\n    };\n\n    var utmSource = fetchParam(Constants.UTM_SOURCE, query, 'utmcsr', cookie);\n    var utmMedium = fetchParam(Constants.UTM_MEDIUM, query, 'utmcmd', cookie);\n    var utmCampaign = fetchParam(Constants.UTM_CAMPAIGN, query, 'utmccn', cookie);\n    var utmTerm = fetchParam(Constants.UTM_TERM, query, 'utmctr', cookie);\n    var utmContent = fetchParam(Constants.UTM_CONTENT, query, 'utmcct', cookie);\n    var utmData = {};\n\n    var addIfNotNull = function addIfNotNull(key, value) {\n      if (!utils.isEmptyString(value)) {\n        utmData[key] = value;\n      }\n    };\n\n    addIfNotNull(Constants.UTM_SOURCE, utmSource);\n    addIfNotNull(Constants.UTM_MEDIUM, utmMedium);\n    addIfNotNull(Constants.UTM_CAMPAIGN, utmCampaign);\n    addIfNotNull(Constants.UTM_TERM, utmTerm);\n    addIfNotNull(Constants.UTM_CONTENT, utmContent);\n    return utmData;\n  };\n\n  /*\n   * Wrapper for a user properties JSON object that supports operations.\n   * Note: if a user property is used in multiple operations on the same Identify object,\n   * only the first operation will be saved, and the rest will be ignored.\n   */\n\n  var AMP_OP_ADD = '$add';\n  var AMP_OP_APPEND = '$append';\n  var AMP_OP_CLEAR_ALL = '$clearAll';\n  var AMP_OP_PREPEND = '$prepend';\n  var AMP_OP_SET = '$set';\n  var AMP_OP_SET_ONCE = '$setOnce';\n  var AMP_OP_UNSET = '$unset';\n  /**\n   * Identify API - instance constructor. Identify objects are a wrapper for user property operations.\n   * Each method adds a user property operation to the Identify object, and returns the same Identify object,\n   * allowing you to chain multiple method calls together.\n   * Note: if the same user property is used in multiple operations on a single Identify object,\n   * only the first operation on that property will be saved, and the rest will be ignored.\n   * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#user-properties-and-user-property-operations}\n   * for more information on the Identify API and user property operations.\n   * @constructor Identify\n   * @public\n   * @example var identify = new amplitude.Identify();\n   */\n\n  var Identify = function Identify() {\n    this.userPropertiesOperations = {};\n    this.properties = []; // keep track of keys that have been added\n  };\n  /**\n   * Increment a user property by a given value (can also be negative to decrement).\n   * If the user property does not have a value set yet, it will be initialized to 0 before being incremented.\n   * @public\n   * @param {string} property - The user property key.\n   * @param {number|string} value - The amount by which to increment the user property. Allows numbers as strings (ex: '123').\n   * @return {Identify} Returns the same Identify object, allowing you to chain multiple method calls together.\n   * @example var identify = new amplitude.Identify().add('karma', 1).add('friends', 1);\n   * amplitude.identify(identify); // send the Identify call\n   */\n\n\n  Identify.prototype.add = function (property, value) {\n    if (type(value) === 'number' || type(value) === 'string') {\n      this._addOperation(AMP_OP_ADD, property, value);\n    } else {\n      utils.log.error('Unsupported type for value: ' + type(value) + ', expecting number or string');\n    }\n\n    return this;\n  };\n  /**\n   * Append a value or values to a user property.\n   * If the user property does not have a value set yet,\n   * it will be initialized to an empty list before the new values are appended.\n   * If the user property has an existing value and it is not a list,\n   * the existing value will be converted into a list with the new values appended.\n   * @public\n   * @param {string} property - The user property key.\n   * @param {number|string|list|object} value - A value or values to append.\n   * Values can be numbers, strings, lists, or object (key:value dict will be flattened).\n   * @return {Identify} Returns the same Identify object, allowing you to chain multiple method calls together.\n   * @example var identify = new amplitude.Identify().append('ab-tests', 'new-user-tests');\n   * identify.append('some_list', [1, 2, 3, 4, 'values']);\n   * amplitude.identify(identify); // send the Identify call\n   */\n\n\n  Identify.prototype.append = function (property, value) {\n    this._addOperation(AMP_OP_APPEND, property, value);\n\n    return this;\n  };\n  /**\n   * Clear all user properties for the current user.\n   * SDK user should instead call amplitude.clearUserProperties() instead of using this.\n   * $clearAll needs to be sent on its own Identify object. If there are already other operations, then don't add $clearAll.\n   * If $clearAll already in an Identify object, don't allow other operations to be added.\n   * @private\n   */\n\n\n  Identify.prototype.clearAll = function () {\n    if (Object.keys(this.userPropertiesOperations).length > 0) {\n      if (!this.userPropertiesOperations.hasOwnProperty(AMP_OP_CLEAR_ALL)) {\n        utils.log.error('Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll');\n      }\n\n      return this;\n    }\n\n    this.userPropertiesOperations[AMP_OP_CLEAR_ALL] = '-';\n    return this;\n  };\n  /**\n   * Prepend a value or values to a user property.\n   * Prepend means inserting the value or values at the front of a list.\n   * If the user property does not have a value set yet,\n   * it will be initialized to an empty list before the new values are prepended.\n   * If the user property has an existing value and it is not a list,\n   * the existing value will be converted into a list with the new values prepended.\n   * @public\n   * @param {string} property - The user property key.\n   * @param {number|string|list|object} value - A value or values to prepend.\n   * Values can be numbers, strings, lists, or object (key:value dict will be flattened).\n   * @return {Identify} Returns the same Identify object, allowing you to chain multiple method calls together.\n   * @example var identify = new amplitude.Identify().prepend('ab-tests', 'new-user-tests');\n   * identify.prepend('some_list', [1, 2, 3, 4, 'values']);\n   * amplitude.identify(identify); // send the Identify call\n   */\n\n\n  Identify.prototype.prepend = function (property, value) {\n    this._addOperation(AMP_OP_PREPEND, property, value);\n\n    return this;\n  };\n  /**\n   * Sets the value of a given user property. If a value already exists, it will be overwriten with the new value.\n   * @public\n   * @param {string} property - The user property key.\n   * @param {number|string|list|object} value - A value or values to set.\n   * Values can be numbers, strings, lists, or object (key:value dict will be flattened).\n   * @return {Identify} Returns the same Identify object, allowing you to chain multiple method calls together.\n   * @example var identify = new amplitude.Identify().set('user_type', 'beta');\n   * identify.set('name', {'first': 'John', 'last': 'Doe'}); // dict is flattened and becomes name.first: John, name.last: Doe\n   * amplitude.identify(identify); // send the Identify call\n   */\n\n\n  Identify.prototype.set = function (property, value) {\n    this._addOperation(AMP_OP_SET, property, value);\n\n    return this;\n  };\n  /**\n   * Sets the value of a given user property only once. Subsequent setOnce operations on that user property will be ignored;\n   * however, that user property can still be modified through any of the other operations.\n   * Useful for capturing properties such as 'initial_signup_date', 'initial_referrer', etc.\n   * @public\n   * @param {string} property - The user property key.\n   * @param {number|string|list|object} value - A value or values to set once.\n   * Values can be numbers, strings, lists, or object (key:value dict will be flattened).\n   * @return {Identify} Returns the same Identify object, allowing you to chain multiple method calls together.\n   * @example var identify = new amplitude.Identify().setOnce('sign_up_date', '2016-04-01');\n   * amplitude.identify(identify); // send the Identify call\n   */\n\n\n  Identify.prototype.setOnce = function (property, value) {\n    this._addOperation(AMP_OP_SET_ONCE, property, value);\n\n    return this;\n  };\n  /**\n   * Unset and remove a user property. This user property will no longer show up in a user's profile.\n   * @public\n   * @param {string} property - The user property key.\n   * @return {Identify} Returns the same Identify object, allowing you to chain multiple method calls together.\n   * @example var identify = new amplitude.Identify().unset('user_type').unset('age');\n   * amplitude.identify(identify); // send the Identify call\n   */\n\n\n  Identify.prototype.unset = function (property) {\n    this._addOperation(AMP_OP_UNSET, property, '-');\n\n    return this;\n  };\n  /**\n   * Helper function that adds operation to the Identify's object\n   * Handle's filtering of duplicate user property keys, and filtering for clearAll.\n   * @private\n   */\n\n\n  Identify.prototype._addOperation = function (operation, property, value) {\n    // check that the identify doesn't already contain a clearAll\n    if (this.userPropertiesOperations.hasOwnProperty(AMP_OP_CLEAR_ALL)) {\n      utils.log.error('This identify already contains a $clearAll operation, skipping operation ' + operation);\n      return;\n    } // check that property wasn't already used in this Identify\n\n\n    if (this.properties.indexOf(property) !== -1) {\n      utils.log.error('User property \"' + property + '\" already used in this identify, skipping operation ' + operation);\n      return;\n    }\n\n    if (!this.userPropertiesOperations.hasOwnProperty(operation)) {\n      this.userPropertiesOperations[operation] = {};\n    }\n\n    this.userPropertiesOperations[operation][property] = value;\n    this.properties.push(property);\n  };\n\n  var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  var md5 = createCommonjsModule(function (module) {\n  (function ($) {\n\n    /*\n    * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n    * to work around bugs in some JS interpreters.\n    */\n    function safeAdd (x, y) {\n      var lsw = (x & 0xffff) + (y & 0xffff);\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n      return (msw << 16) | (lsw & 0xffff)\n    }\n\n    /*\n    * Bitwise rotate a 32-bit number to the left.\n    */\n    function bitRotateLeft (num, cnt) {\n      return (num << cnt) | (num >>> (32 - cnt))\n    }\n\n    /*\n    * These functions implement the four basic operations the algorithm uses.\n    */\n    function md5cmn (q, a, b, x, s, t) {\n      return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\n    }\n    function md5ff (a, b, c, d, x, s, t) {\n      return md5cmn((b & c) | (~b & d), a, b, x, s, t)\n    }\n    function md5gg (a, b, c, d, x, s, t) {\n      return md5cmn((b & d) | (c & ~d), a, b, x, s, t)\n    }\n    function md5hh (a, b, c, d, x, s, t) {\n      return md5cmn(b ^ c ^ d, a, b, x, s, t)\n    }\n    function md5ii (a, b, c, d, x, s, t) {\n      return md5cmn(c ^ (b | ~d), a, b, x, s, t)\n    }\n\n    /*\n    * Calculate the MD5 of an array of little-endian words, and a bit length.\n    */\n    function binlMD5 (x, len) {\n      /* append padding */\n      x[len >> 5] |= 0x80 << (len % 32);\n      x[((len + 64) >>> 9 << 4) + 14] = len;\n\n      var i;\n      var olda;\n      var oldb;\n      var oldc;\n      var oldd;\n      var a = 1732584193;\n      var b = -271733879;\n      var c = -1732584194;\n      var d = 271733878;\n\n      for (i = 0; i < x.length; i += 16) {\n        olda = a;\n        oldb = b;\n        oldc = c;\n        oldd = d;\n\n        a = md5ff(a, b, c, d, x[i], 7, -680876936);\n        d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n        c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n        b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n        a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n        d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n        c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n        b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n        a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n        d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n        c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n        b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n        a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n        d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n        c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n        b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\n        a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n        d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n        c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n        b = md5gg(b, c, d, a, x[i], 20, -373897302);\n        a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n        d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n        c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n        b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n        a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n        d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n        c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n        b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n        a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n        d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n        c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n        b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\n        a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n        d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n        c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n        b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n        a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n        d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n        c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n        b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n        a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n        d = md5hh(d, a, b, c, x[i], 11, -358537222);\n        c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n        b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n        a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n        d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n        c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n        b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n\n        a = md5ii(a, b, c, d, x[i], 6, -198630844);\n        d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n        c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n        b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n        a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n        d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n        c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n        b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n        a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n        d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n        c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n        b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n        a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n        d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n        c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n        b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n\n        a = safeAdd(a, olda);\n        b = safeAdd(b, oldb);\n        c = safeAdd(c, oldc);\n        d = safeAdd(d, oldd);\n      }\n      return [a, b, c, d]\n    }\n\n    /*\n    * Convert an array of little-endian words to a string\n    */\n    function binl2rstr (input) {\n      var i;\n      var output = '';\n      var length32 = input.length * 32;\n      for (i = 0; i < length32; i += 8) {\n        output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xff);\n      }\n      return output\n    }\n\n    /*\n    * Convert a raw string to an array of little-endian words\n    * Characters >255 have their high-byte silently ignored.\n    */\n    function rstr2binl (input) {\n      var i;\n      var output = [];\n      output[(input.length >> 2) - 1] = undefined;\n      for (i = 0; i < output.length; i += 1) {\n        output[i] = 0;\n      }\n      var length8 = input.length * 8;\n      for (i = 0; i < length8; i += 8) {\n        output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << (i % 32);\n      }\n      return output\n    }\n\n    /*\n    * Calculate the MD5 of a raw string\n    */\n    function rstrMD5 (s) {\n      return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\n    }\n\n    /*\n    * Calculate the HMAC-MD5, of a key and some data (raw strings)\n    */\n    function rstrHMACMD5 (key, data) {\n      var i;\n      var bkey = rstr2binl(key);\n      var ipad = [];\n      var opad = [];\n      var hash;\n      ipad[15] = opad[15] = undefined;\n      if (bkey.length > 16) {\n        bkey = binlMD5(bkey, key.length * 8);\n      }\n      for (i = 0; i < 16; i += 1) {\n        ipad[i] = bkey[i] ^ 0x36363636;\n        opad[i] = bkey[i] ^ 0x5c5c5c5c;\n      }\n      hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\n      return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\n    }\n\n    /*\n    * Convert a raw string to a hex string\n    */\n    function rstr2hex (input) {\n      var hexTab = '0123456789abcdef';\n      var output = '';\n      var x;\n      var i;\n      for (i = 0; i < input.length; i += 1) {\n        x = input.charCodeAt(i);\n        output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f);\n      }\n      return output\n    }\n\n    /*\n    * Encode a string as utf-8\n    */\n    function str2rstrUTF8 (input) {\n      return unescape(encodeURIComponent(input))\n    }\n\n    /*\n    * Take string arguments and return either raw or hex encoded strings\n    */\n    function rawMD5 (s) {\n      return rstrMD5(str2rstrUTF8(s))\n    }\n    function hexMD5 (s) {\n      return rstr2hex(rawMD5(s))\n    }\n    function rawHMACMD5 (k, d) {\n      return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\n    }\n    function hexHMACMD5 (k, d) {\n      return rstr2hex(rawHMACMD5(k, d))\n    }\n\n    function md5 (string, key, raw) {\n      if (!key) {\n        if (!raw) {\n          return hexMD5(string)\n        }\n        return rawMD5(string)\n      }\n      if (!raw) {\n        return hexHMACMD5(key, string)\n      }\n      return rawHMACMD5(key, string)\n    }\n\n    if (module.exports) {\n      module.exports = md5;\n    } else {\n      $.md5 = md5;\n    }\n  })(commonjsGlobal);\n  });\n\n  var strictUriEncode = function (str) {\n  \treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n  \t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n  \t});\n  };\n\n  /*\n  object-assign\n  (c) Sindre Sorhus\n  @license MIT\n  */\n  /* eslint-disable no-unused-vars */\n  var getOwnPropertySymbols = Object.getOwnPropertySymbols;\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  var propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n  function toObject(val) {\n  \tif (val === null || val === undefined) {\n  \t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n  \t}\n\n  \treturn Object(val);\n  }\n\n  function shouldUseNative() {\n  \ttry {\n  \t\tif (!Object.assign) {\n  \t\t\treturn false;\n  \t\t}\n\n  \t\t// Detect buggy property enumeration order in older V8 versions.\n\n  \t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n  \t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n  \t\ttest1[5] = 'de';\n  \t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n  \t\t\treturn false;\n  \t\t}\n\n  \t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n  \t\tvar test2 = {};\n  \t\tfor (var i = 0; i < 10; i++) {\n  \t\t\ttest2['_' + String.fromCharCode(i)] = i;\n  \t\t}\n  \t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n  \t\t\treturn test2[n];\n  \t\t});\n  \t\tif (order2.join('') !== '0123456789') {\n  \t\t\treturn false;\n  \t\t}\n\n  \t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n  \t\tvar test3 = {};\n  \t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n  \t\t\ttest3[letter] = letter;\n  \t\t});\n  \t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n  \t\t\t\t'abcdefghijklmnopqrst') {\n  \t\t\treturn false;\n  \t\t}\n\n  \t\treturn true;\n  \t} catch (err) {\n  \t\t// We don't expect any of the above to throw, but better to be safe.\n  \t\treturn false;\n  \t}\n  }\n\n  var objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n  \tvar from;\n  \tvar to = toObject(target);\n  \tvar symbols;\n\n  \tfor (var s = 1; s < arguments.length; s++) {\n  \t\tfrom = Object(arguments[s]);\n\n  \t\tfor (var key in from) {\n  \t\t\tif (hasOwnProperty.call(from, key)) {\n  \t\t\t\tto[key] = from[key];\n  \t\t\t}\n  \t\t}\n\n  \t\tif (getOwnPropertySymbols) {\n  \t\t\tsymbols = getOwnPropertySymbols(from);\n  \t\t\tfor (var i = 0; i < symbols.length; i++) {\n  \t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n  \t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n  \t\t\t\t}\n  \t\t\t}\n  \t\t}\n  \t}\n\n  \treturn to;\n  };\n\n  var token = '%[a-f0-9]{2}';\n  var singleMatcher = new RegExp(token, 'gi');\n  var multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\n  function decodeComponents(components, split) {\n  \ttry {\n  \t\t// Try to decode the entire string first\n  \t\treturn decodeURIComponent(components.join(''));\n  \t} catch (err) {\n  \t\t// Do nothing\n  \t}\n\n  \tif (components.length === 1) {\n  \t\treturn components;\n  \t}\n\n  \tsplit = split || 1;\n\n  \t// Split the array in 2 parts\n  \tvar left = components.slice(0, split);\n  \tvar right = components.slice(split);\n\n  \treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n  }\n\n  function decode(input) {\n  \ttry {\n  \t\treturn decodeURIComponent(input);\n  \t} catch (err) {\n  \t\tvar tokens = input.match(singleMatcher);\n\n  \t\tfor (var i = 1; i < tokens.length; i++) {\n  \t\t\tinput = decodeComponents(tokens, i).join('');\n\n  \t\t\ttokens = input.match(singleMatcher);\n  \t\t}\n\n  \t\treturn input;\n  \t}\n  }\n\n  function customDecodeURIComponent(input) {\n  \t// Keep track of all the replacements and prefill the map with the `BOM`\n  \tvar replaceMap = {\n  \t\t'%FE%FF': '\\uFFFD\\uFFFD',\n  \t\t'%FF%FE': '\\uFFFD\\uFFFD'\n  \t};\n\n  \tvar match = multiMatcher.exec(input);\n  \twhile (match) {\n  \t\ttry {\n  \t\t\t// Decode as big chunks as possible\n  \t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n  \t\t} catch (err) {\n  \t\t\tvar result = decode(match[0]);\n\n  \t\t\tif (result !== match[0]) {\n  \t\t\t\treplaceMap[match[0]] = result;\n  \t\t\t}\n  \t\t}\n\n  \t\tmatch = multiMatcher.exec(input);\n  \t}\n\n  \t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n  \treplaceMap['%C2'] = '\\uFFFD';\n\n  \tvar entries = Object.keys(replaceMap);\n\n  \tfor (var i = 0; i < entries.length; i++) {\n  \t\t// Replace all decoded components\n  \t\tvar key = entries[i];\n  \t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n  \t}\n\n  \treturn input;\n  }\n\n  var decodeUriComponent = function (encodedURI) {\n  \tif (typeof encodedURI !== 'string') {\n  \t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n  \t}\n\n  \ttry {\n  \t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n  \t\t// Try the built in decoder first\n  \t\treturn decodeURIComponent(encodedURI);\n  \t} catch (err) {\n  \t\t// Fallback to a more advanced decoder\n  \t\treturn customDecodeURIComponent(encodedURI);\n  \t}\n  };\n\n  function encoderForArrayFormat(opts) {\n  \tswitch (opts.arrayFormat) {\n  \t\tcase 'index':\n  \t\t\treturn function (key, value, index) {\n  \t\t\t\treturn value === null ? [\n  \t\t\t\t\tencode(key, opts),\n  \t\t\t\t\t'[',\n  \t\t\t\t\tindex,\n  \t\t\t\t\t']'\n  \t\t\t\t].join('') : [\n  \t\t\t\t\tencode(key, opts),\n  \t\t\t\t\t'[',\n  \t\t\t\t\tencode(index, opts),\n  \t\t\t\t\t']=',\n  \t\t\t\t\tencode(value, opts)\n  \t\t\t\t].join('');\n  \t\t\t};\n\n  \t\tcase 'bracket':\n  \t\t\treturn function (key, value) {\n  \t\t\t\treturn value === null ? encode(key, opts) : [\n  \t\t\t\t\tencode(key, opts),\n  \t\t\t\t\t'[]=',\n  \t\t\t\t\tencode(value, opts)\n  \t\t\t\t].join('');\n  \t\t\t};\n\n  \t\tdefault:\n  \t\t\treturn function (key, value) {\n  \t\t\t\treturn value === null ? encode(key, opts) : [\n  \t\t\t\t\tencode(key, opts),\n  \t\t\t\t\t'=',\n  \t\t\t\t\tencode(value, opts)\n  \t\t\t\t].join('');\n  \t\t\t};\n  \t}\n  }\n\n  function parserForArrayFormat(opts) {\n  \tvar result;\n\n  \tswitch (opts.arrayFormat) {\n  \t\tcase 'index':\n  \t\t\treturn function (key, value, accumulator) {\n  \t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n  \t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n  \t\t\t\tif (!result) {\n  \t\t\t\t\taccumulator[key] = value;\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n\n  \t\t\t\tif (accumulator[key] === undefined) {\n  \t\t\t\t\taccumulator[key] = {};\n  \t\t\t\t}\n\n  \t\t\t\taccumulator[key][result[1]] = value;\n  \t\t\t};\n\n  \t\tcase 'bracket':\n  \t\t\treturn function (key, value, accumulator) {\n  \t\t\t\tresult = /(\\[\\])$/.exec(key);\n  \t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n  \t\t\t\tif (!result) {\n  \t\t\t\t\taccumulator[key] = value;\n  \t\t\t\t\treturn;\n  \t\t\t\t} else if (accumulator[key] === undefined) {\n  \t\t\t\t\taccumulator[key] = [value];\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n\n  \t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n  \t\t\t};\n\n  \t\tdefault:\n  \t\t\treturn function (key, value, accumulator) {\n  \t\t\t\tif (accumulator[key] === undefined) {\n  \t\t\t\t\taccumulator[key] = value;\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n\n  \t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n  \t\t\t};\n  \t}\n  }\n\n  function encode(value, opts) {\n  \tif (opts.encode) {\n  \t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n  \t}\n\n  \treturn value;\n  }\n\n  function keysSorter(input) {\n  \tif (Array.isArray(input)) {\n  \t\treturn input.sort();\n  \t} else if (typeof input === 'object') {\n  \t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n  \t\t\treturn Number(a) - Number(b);\n  \t\t}).map(function (key) {\n  \t\t\treturn input[key];\n  \t\t});\n  \t}\n\n  \treturn input;\n  }\n\n  function extract(str) {\n  \tvar queryStart = str.indexOf('?');\n  \tif (queryStart === -1) {\n  \t\treturn '';\n  \t}\n  \treturn str.slice(queryStart + 1);\n  }\n\n  function parse(str, opts) {\n  \topts = objectAssign({arrayFormat: 'none'}, opts);\n\n  \tvar formatter = parserForArrayFormat(opts);\n\n  \t// Create an object with no prototype\n  \t// https://github.com/sindresorhus/query-string/issues/47\n  \tvar ret = Object.create(null);\n\n  \tif (typeof str !== 'string') {\n  \t\treturn ret;\n  \t}\n\n  \tstr = str.trim().replace(/^[?#&]/, '');\n\n  \tif (!str) {\n  \t\treturn ret;\n  \t}\n\n  \tstr.split('&').forEach(function (param) {\n  \t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n  \t\t// Firefox (pre 40) decodes `%3D` to `=`\n  \t\t// https://github.com/sindresorhus/query-string/pull/37\n  \t\tvar key = parts.shift();\n  \t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n  \t\t// missing `=` should be `null`:\n  \t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n  \t\tval = val === undefined ? null : decodeUriComponent(val);\n\n  \t\tformatter(decodeUriComponent(key), val, ret);\n  \t});\n\n  \treturn Object.keys(ret).sort().reduce(function (result, key) {\n  \t\tvar val = ret[key];\n  \t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n  \t\t\t// Sort object keys, not values\n  \t\t\tresult[key] = keysSorter(val);\n  \t\t} else {\n  \t\t\tresult[key] = val;\n  \t\t}\n\n  \t\treturn result;\n  \t}, Object.create(null));\n  }\n\n  var extract_1 = extract;\n  var parse_1 = parse;\n\n  var stringify = function (obj, opts) {\n  \tvar defaults = {\n  \t\tencode: true,\n  \t\tstrict: true,\n  \t\tarrayFormat: 'none'\n  \t};\n\n  \topts = objectAssign(defaults, opts);\n\n  \tif (opts.sort === false) {\n  \t\topts.sort = function () {};\n  \t}\n\n  \tvar formatter = encoderForArrayFormat(opts);\n\n  \treturn obj ? Object.keys(obj).sort(opts.sort).map(function (key) {\n  \t\tvar val = obj[key];\n\n  \t\tif (val === undefined) {\n  \t\t\treturn '';\n  \t\t}\n\n  \t\tif (val === null) {\n  \t\t\treturn encode(key, opts);\n  \t\t}\n\n  \t\tif (Array.isArray(val)) {\n  \t\t\tvar result = [];\n\n  \t\t\tval.slice().forEach(function (val2) {\n  \t\t\t\tif (val2 === undefined) {\n  \t\t\t\t\treturn;\n  \t\t\t\t}\n\n  \t\t\t\tresult.push(formatter(key, val2, result.length));\n  \t\t\t});\n\n  \t\t\treturn result.join('&');\n  \t\t}\n\n  \t\treturn encode(key, opts) + '=' + encode(val, opts);\n  \t}).filter(function (x) {\n  \t\treturn x.length > 0;\n  \t}).join('&') : '';\n  };\n\n  var parseUrl = function (str, opts) {\n  \treturn {\n  \t\turl: str.split('?')[0] || '',\n  \t\tquery: parse(extract(str), opts)\n  \t};\n  };\n\n  var queryString = {\n  \textract: extract_1,\n  \tparse: parse_1,\n  \tstringify: stringify,\n  \tparseUrl: parseUrl\n  };\n\n  /*\n   * Simple AJAX request object\n   */\n\n  var Request = function Request(url, data) {\n    this.url = url;\n    this.data = data || {};\n  };\n\n  Request.prototype.send = function (callback) {\n    var isIE = window.XDomainRequest ? true : false;\n\n    if (isIE) {\n      var xdr = new window.XDomainRequest();\n      xdr.open('POST', this.url, true);\n\n      xdr.onload = function () {\n        callback(200, xdr.responseText);\n      };\n\n      xdr.onerror = function () {\n        // status code not available from xdr, try string matching on responseText\n        if (xdr.responseText === 'Request Entity Too Large') {\n          callback(413, xdr.responseText);\n        } else {\n          callback(500, xdr.responseText);\n        }\n      };\n\n      xdr.ontimeout = function () {};\n\n      xdr.onprogress = function () {};\n\n      xdr.send(queryString.stringify(this.data));\n    } else {\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', this.url, true);\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          callback(xhr.status, xhr.responseText);\n        }\n      };\n\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n      xhr.send(queryString.stringify(this.data));\n    } //log('sent request to ' + this.url + ' with data ' + decodeURIComponent(queryString(this.data)));\n\n  };\n\n  /*\n   * Wrapper for logging Revenue data. Revenue objects get passed to amplitude.logRevenueV2 to send to Amplitude servers.\n   * Note: price is the only required field. If quantity is not specified, then defaults to 1.\n   */\n\n  /**\n   * Revenue API - instance constructor. Revenue objects are a wrapper for revenue data.\n   * Each method updates a revenue property in the Revenue object, and returns the same Revenue object,\n   * allowing you to chain multiple method calls together.\n   * Note: price is a required field to log revenue events.\n   * If quantity is not specified then defaults to 1.\n   * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#tracking-revenue} for more information\n   * about logging Revenue.\n   * @constructor Revenue\n   * @public\n   * @example var revenue = new amplitude.Revenue();\n   */\n\n  var Revenue = function Revenue() {\n    // required fields\n    this._price = null; // optional fields\n\n    this._productId = null;\n    this._quantity = 1;\n    this._revenueType = null;\n    this._properties = null;\n  };\n  /**\n   * Set a value for the product identifer.\n   * @public\n   * @param {string} productId - The value for the product identifier. Empty and invalid strings are ignored.\n   * @return {Revenue} Returns the same Revenue object, allowing you to chain multiple method calls together.\n   * @example var revenue = new amplitude.Revenue().setProductId('productIdentifier').setPrice(10.99);\n   * amplitude.logRevenueV2(revenue);\n   */\n\n\n  Revenue.prototype.setProductId = function setProductId(productId) {\n    if (type(productId) !== 'string') {\n      utils.log.error('Unsupported type for productId: ' + type(productId) + ', expecting string');\n    } else if (utils.isEmptyString(productId)) {\n      utils.log.error('Invalid empty productId');\n    } else {\n      this._productId = productId;\n    }\n\n    return this;\n  };\n  /**\n   * Set a value for the quantity. Note revenue amount is calculated as price * quantity.\n   * @public\n   * @param {number} quantity - Integer value for the quantity. If not set, quantity defaults to 1.\n   * @return {Revenue} Returns the same Revenue object, allowing you to chain multiple method calls together.\n   * @example var revenue = new amplitude.Revenue().setProductId('productIdentifier').setPrice(10.99).setQuantity(5);\n   * amplitude.logRevenueV2(revenue);\n   */\n\n\n  Revenue.prototype.setQuantity = function setQuantity(quantity) {\n    if (type(quantity) !== 'number') {\n      utils.log.error('Unsupported type for quantity: ' + type(quantity) + ', expecting number');\n    } else {\n      this._quantity = parseInt(quantity);\n    }\n\n    return this;\n  };\n  /**\n   * Set a value for the price. This field is required for all revenue being logged.\n   * Note revenue amount is calculated as price * quantity.\n   * @public\n   * @param {number} price - Double value for the quantity.\n   * @return {Revenue} Returns the same Revenue object, allowing you to chain multiple method calls together.\n   * @example var revenue = new amplitude.Revenue().setProductId('productIdentifier').setPrice(10.99);\n   * amplitude.logRevenueV2(revenue);\n   */\n\n\n  Revenue.prototype.setPrice = function setPrice(price) {\n    if (type(price) !== 'number') {\n      utils.log.error('Unsupported type for price: ' + type(price) + ', expecting number');\n    } else {\n      this._price = price;\n    }\n\n    return this;\n  };\n  /**\n   * Set a value for the revenueType (for example purchase, cost, tax, refund, etc).\n   * @public\n   * @param {string} revenueType - RevenueType to designate.\n   * @return {Revenue} Returns the same Revenue object, allowing you to chain multiple method calls together.\n   * @example var revenue = new amplitude.Revenue().setProductId('productIdentifier').setPrice(10.99).setRevenueType('purchase');\n   * amplitude.logRevenueV2(revenue);\n   */\n\n\n  Revenue.prototype.setRevenueType = function setRevenueType(revenueType) {\n    if (type(revenueType) !== 'string') {\n      utils.log.error('Unsupported type for revenueType: ' + type(revenueType) + ', expecting string');\n    } else {\n      this._revenueType = revenueType;\n    }\n\n    return this;\n  };\n  /**\n   * Set event properties for the revenue event.\n   * @public\n   * @param {object} eventProperties - Revenue event properties to set.\n   * @return {Revenue} Returns the same Revenue object, allowing you to chain multiple method calls together.\n   * @example var event_properties = {'city': 'San Francisco'};\n   * var revenue = new amplitude.Revenue().setProductId('productIdentifier').setPrice(10.99).setEventProperties(event_properties);\n   * amplitude.logRevenueV2(revenue);\n  */\n\n\n  Revenue.prototype.setEventProperties = function setEventProperties(eventProperties) {\n    if (type(eventProperties) !== 'object') {\n      utils.log.error('Unsupported type for eventProperties: ' + type(eventProperties) + ', expecting object');\n    } else {\n      this._properties = utils.validateProperties(eventProperties);\n    }\n\n    return this;\n  };\n  /**\n   * @private\n   */\n\n\n  Revenue.prototype._isValidRevenue = function _isValidRevenue() {\n    if (type(this._price) !== 'number') {\n      utils.log.error('Invalid revenue, need to set price field');\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * @private\n   */\n\n\n  Revenue.prototype._toJSONObject = function _toJSONObject() {\n    var obj = type(this._properties) === 'object' ? this._properties : {};\n\n    if (this._productId !== null) {\n      obj[Constants.REVENUE_PRODUCT_ID] = this._productId;\n    }\n\n    if (this._quantity !== null) {\n      obj[Constants.REVENUE_QUANTITY] = this._quantity;\n    }\n\n    if (this._price !== null) {\n      obj[Constants.REVENUE_PRICE] = this._price;\n    }\n\n    if (this._revenueType !== null) {\n      obj[Constants.REVENUE_REVENUE_TYPE] = this._revenueType;\n    }\n\n    return obj;\n  };\n\n  var uaParser = createCommonjsModule(function (module, exports) {\n  /*!\n   * UAParser.js v0.7.19\n   * Lightweight JavaScript-based User-Agent string parser\n   * https://github.com/faisalman/ua-parser-js\n   *\n   * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>\n   * Dual licensed under GPLv2 or MIT\n   */\n\n  (function (window, undefined$1) {\n\n      //////////////\n      // Constants\n      /////////////\n\n\n      var LIBVERSION  = '0.7.19',\n          EMPTY       = '',\n          UNKNOWN     = '?',\n          FUNC_TYPE   = 'function',\n          UNDEF_TYPE  = 'undefined',\n          OBJ_TYPE    = 'object',\n          STR_TYPE    = 'string',\n          MAJOR       = 'major', // deprecated\n          MODEL       = 'model',\n          NAME        = 'name',\n          TYPE        = 'type',\n          VENDOR      = 'vendor',\n          VERSION     = 'version',\n          ARCHITECTURE= 'architecture',\n          CONSOLE     = 'console',\n          MOBILE      = 'mobile',\n          TABLET      = 'tablet',\n          SMARTTV     = 'smarttv',\n          WEARABLE    = 'wearable',\n          EMBEDDED    = 'embedded';\n\n\n      ///////////\n      // Helper\n      //////////\n\n\n      var util = {\n          extend : function (regexes, extensions) {\n              var margedRegexes = {};\n              for (var i in regexes) {\n                  if (extensions[i] && extensions[i].length % 2 === 0) {\n                      margedRegexes[i] = extensions[i].concat(regexes[i]);\n                  } else {\n                      margedRegexes[i] = regexes[i];\n                  }\n              }\n              return margedRegexes;\n          },\n          has : function (str1, str2) {\n            if (typeof str1 === \"string\") {\n              return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n            } else {\n              return false;\n            }\n          },\n          lowerize : function (str) {\n              return str.toLowerCase();\n          },\n          major : function (version) {\n              return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g,'').split(\".\")[0] : undefined$1;\n          },\n          trim : function (str) {\n            return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n          }\n      };\n\n\n      ///////////////\n      // Map helper\n      //////////////\n\n\n      var mapper = {\n\n          rgx : function (ua, arrays) {\n\n              //var result = {},\n              var i = 0, j, k, p, q, matches, match;//, args = arguments;\n\n              /*// construct object barebones\n              for (p = 0; p < args[1].length; p++) {\n                  q = args[1][p];\n                  result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n              }*/\n\n              // loop through all regexes maps\n              while (i < arrays.length && !matches) {\n\n                  var regex = arrays[i],       // even sequence (0,2,4,..)\n                      props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                  j = k = 0;\n\n                  // try matching uastring with regexes\n                  while (j < regex.length && !matches) {\n\n                      matches = regex[j++].exec(ua);\n\n                      if (!!matches) {\n                          for (p = 0; p < props.length; p++) {\n                              match = matches[++k];\n                              q = props[p];\n                              // check if given property is actually array\n                              if (typeof q === OBJ_TYPE && q.length > 0) {\n                                  if (q.length == 2) {\n                                      if (typeof q[1] == FUNC_TYPE) {\n                                          // assign modified match\n                                          this[q[0]] = q[1].call(this, match);\n                                      } else {\n                                          // assign given value, ignore regex match\n                                          this[q[0]] = q[1];\n                                      }\n                                  } else if (q.length == 3) {\n                                      // check whether function or regex\n                                      if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                          // call function (usually string mapper)\n                                          this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined$1;\n                                      } else {\n                                          // sanitize match using given regex\n                                          this[q[0]] = match ? match.replace(q[1], q[2]) : undefined$1;\n                                      }\n                                  } else if (q.length == 4) {\n                                          this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined$1;\n                                  }\n                              } else {\n                                  this[q] = match ? match : undefined$1;\n                              }\n                          }\n                      }\n                  }\n                  i += 2;\n              }\n              // console.log(this);\n              //return this;\n          },\n\n          str : function (str, map) {\n\n              for (var i in map) {\n                  // check if array\n                  if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                      for (var j = 0; j < map[i].length; j++) {\n                          if (util.has(map[i][j], str)) {\n                              return (i === UNKNOWN) ? undefined$1 : i;\n                          }\n                      }\n                  } else if (util.has(map[i], str)) {\n                      return (i === UNKNOWN) ? undefined$1 : i;\n                  }\n              }\n              return str;\n          }\n      };\n\n\n      ///////////////\n      // String map\n      //////////////\n\n\n      var maps = {\n\n          browser : {\n              oldsafari : {\n                  version : {\n                      '1.0'   : '/8',\n                      '1.2'   : '/1',\n                      '1.3'   : '/3',\n                      '2.0'   : '/412',\n                      '2.0.2' : '/416',\n                      '2.0.3' : '/417',\n                      '2.0.4' : '/419',\n                      '?'     : '/'\n                  }\n              },\n              name : {\n                  'Opera Mobile' : 'Opera Mobi',\n                  'IE Mobile'    : 'IEMobile'\n              }\n          },\n\n          device : {\n              amazon : {\n                  model : {\n                      'Fire Phone' : ['SD', 'KF']\n                  }\n              },\n              sprint : {\n                  model : {\n                      'Evo Shift 4G' : '7373KT'\n                  },\n                  vendor : {\n                      'HTC'       : 'APA',\n                      'Sprint'    : 'Sprint'\n                  }\n              }\n          },\n\n          os : {\n              windows : {\n                  version : {\n                      'ME'        : '4.90',\n                      'NT 3.11'   : 'NT3.51',\n                      'NT 4.0'    : 'NT4.0',\n                      '2000'      : 'NT 5.0',\n                      'XP'        : ['NT 5.1', 'NT 5.2'],\n                      'Vista'     : 'NT 6.0',\n                      '7'         : 'NT 6.1',\n                      '8'         : 'NT 6.2',\n                      '8.1'       : 'NT 6.3',\n                      '10'        : ['NT 6.4', 'NT 10.0'],\n                      'RT'        : 'ARM'\n                  },\n                  name : {\n                      'Windows Phone' : 'Windows Phone OS'\n                  }\n              }\n          }\n      };\n\n\n      //////////////\n      // Regex map\n      /////////////\n\n\n      var regexes = {\n\n          browser : [[\n\n              // Presto based\n              /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n              /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n              /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n              /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n              ], [NAME, VERSION], [\n\n              /(opios)[\\/\\s]+([\\w\\.]+)/i                                          // Opera mini on iphone >= 8.0\n              ], [[NAME, 'Opera Mini'], VERSION], [\n\n              /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n              ], [[NAME, 'Opera'], VERSION], [\n\n              // Mixed\n              /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n              /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]*)/i,\n                                                                                  // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n              // Trident based\n              /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                  // Avant/IEMobile/SlimBrowser/Baidu\n              /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n              // Webkit/KHTML based\n              /(rekonq)\\/([\\w\\.]*)/i,                                             // Rekonq\n              /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\\/([\\w\\.-]+)/i\n                                                                                  // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n              ], [NAME, VERSION], [\n\n              /(konqueror)\\/([\\w\\.]+)/i                                           // Konqueror\n              ], [[NAME, 'Konqueror'], VERSION], [\n\n              /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n              ], [[NAME, 'IE'], VERSION], [\n\n              /(edge|edgios|edga)\\/((\\d+)?[\\w\\.]+)/i                              // Microsoft Edge\n              ], [[NAME, 'Edge'], VERSION], [\n\n              /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n              ], [[NAME, 'Yandex'], VERSION], [\n\n              /(puffin)\\/([\\w\\.]+)/i                                              // Puffin\n              ], [[NAME, 'Puffin'], VERSION], [\n\n              /(focus)\\/([\\w\\.]+)/i                                               // Firefox Focus\n              ], [[NAME, 'Firefox Focus'], VERSION], [\n\n              /(opt)\\/([\\w\\.]+)/i                                                 // Opera Touch\n              ], [[NAME, 'Opera Touch'], VERSION], [\n\n              /((?:[\\s\\/])uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w\\.]+)/i         // UCBrowser\n              ], [[NAME, 'UCBrowser'], VERSION], [\n\n              /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n              ], [[NAME, /_/g, ' '], VERSION], [\n\n              /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i,\n              /android.+(chrome)\\/([\\w\\.]+)\\s+(?:mobile\\s?safari)/i               // Chrome for Android/iOS\n              ], [[NAME, 'Chrome Mobile'], VERSION], [\n\n              /(micromessenger)\\/([\\w\\.]+)/i                                      // WeChat\n              ], [[NAME, 'WeChat'], VERSION], [\n\n              /(brave)\\/([\\w\\.]+)/i                                              // Brave browser\n              ], [[NAME, 'Brave'], VERSION], [\n\n              /(qqbrowserlite)\\/([\\w\\.]+)/i                                       // QQBrowserLite\n              ], [NAME, VERSION], [\n\n              /(QQ)\\/([\\d\\.]+)/i                                                  // QQ, aka ShouQ\n              ], [NAME, VERSION], [\n\n              /m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i                                    // QQBrowser\n              ], [NAME, VERSION], [\n\n              /(BIDUBrowser)[\\/\\s]?([\\w\\.]+)/i                                    // Baidu Browser\n              ], [NAME, VERSION], [\n\n              /(2345Explorer)[\\/\\s]?([\\w\\.]+)/i                                   // 2345 Browser\n              ], [NAME, VERSION], [\n\n              /(MetaSr)[\\/\\s]?([\\w\\.]+)/i                                         // SouGouBrowser\n              ], [NAME], [\n\n              /(LBBROWSER)/i                                      // LieBao Browser\n              ], [NAME], [\n\n              /xiaomi\\/miuibrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n              ], [VERSION, [NAME, 'MIUI Browser']], [\n\n              /;fbav\\/([\\w\\.]+);/i                                                // Facebook App for iOS & Android\n              ], [VERSION, [NAME, 'Facebook']], [\n\n              /safari\\s(line)\\/([\\w\\.]+)/i,                                       // Line App for iOS\n              /android.+(line)\\/([\\w\\.]+)\\/iab/i                                  // Line App for Android\n              ], [NAME, VERSION], [\n\n              /headlesschrome(?:\\/([\\w\\.]+)|\\s)/i                                 // Chrome Headless\n              ], [VERSION, [NAME, 'Chrome Headless']], [\n\n              /\\swv\\).+(chrome)\\/([\\w\\.]+)/i                                      // Chrome WebView\n              ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [\n\n              /((?:oculus|samsung)browser)\\/([\\w\\.]+)/i\n              ], [[NAME, /(.+(?:g|us))(.+)/, '$1 $2'], VERSION], [                // Oculus / Samsung Browser\n\n              /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i        // Android Browser\n              ], [VERSION, [NAME, 'Android Browser']], [\n\n              /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n                                                                                  // Chrome/OmniWeb/Arora/Tizen/Nokia\n              ], [NAME, VERSION], [\n\n              /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n              ], [[NAME, 'Dolphin'], VERSION], [\n\n              /(coast)\\/([\\w\\.]+)/i                                               // Opera Coast\n              ], [[NAME, 'Opera Coast'], VERSION], [\n\n              /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n              ], [VERSION, [NAME, 'Firefox']], [\n\n              /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n              ], [VERSION, [NAME, 'Mobile Safari']], [\n\n              /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n              ], [VERSION, NAME], [\n\n              /webkit.+?(gsa)\\/([\\w\\.]+).+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i  // Google Search Appliance on iOS\n              ], [[NAME, 'GSA'], VERSION], [\n\n              /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n              ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n              /(webkit|khtml)\\/([\\w\\.]+)/i\n              ], [NAME, VERSION], [\n\n              // Gecko based\n              /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n              ], [[NAME, 'Netscape'], VERSION], [\n              /(swiftfox)/i,                                                      // Swiftfox\n              /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                  // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n              /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([\\w\\.-]+)/i,\n\n                                                                                  // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n              /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n              // Other\n              /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                  // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n              /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n              /(gobrowser)\\/?([\\w\\.]*)/i,                                         // GoBrowser\n              /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n              /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n              ], [NAME, VERSION]\n\n              /* /////////////////////\n              // Media players BEGIN\n              ////////////////////////\n\n              , [\n\n              /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n              /(coremedia) v((\\d+)[\\w\\._]+)/i\n              ], [NAME, VERSION], [\n\n              /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n              ], [NAME, VERSION], [\n\n              /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n              ], [NAME, VERSION], [\n\n              /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                  // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                  // NSPlayer/PSP-InternetRadioPlayer/Videos\n              /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n              /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n              /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n              ], [NAME, VERSION], [\n              /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n              ], [NAME, VERSION], [\n\n              /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n              ], [[NAME, 'Flip Player'], VERSION], [\n\n              /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                  // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n              ], [NAME], [\n\n              /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                  // Gstreamer\n              ], [NAME, VERSION], [\n\n              /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n              /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                  // Java/urllib/requests/wget/cURL\n              /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n              ], [NAME, VERSION], [\n\n              /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n              ], [[NAME, /_/g, ' '], VERSION], [\n\n              /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                  // MPlayer SVN\n              ], [NAME, VERSION], [\n\n              /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n              ], [NAME, VERSION], [\n\n              /(mplayer)/i,                                                       // MPlayer (no other info)\n              /(yourmuze)/i,                                                      // YourMuze\n              /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n              ], [NAME], [\n\n              /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n              ], [NAME, VERSION], [\n\n              /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n              ], [NAME, VERSION], [\n\n              /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n              ], [NAME, VERSION], [\n\n              /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n              /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n              /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n              ], [NAME, VERSION], [\n\n              /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                  // inlight radio\n              ], [NAME], [\n\n              /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                  // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                  // SoundTap/Totem/Stagefright/Streamium\n              ], [NAME, VERSION], [\n\n              /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n              ], [NAME, VERSION], [\n\n              /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n              /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n              /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n              /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n              /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n              ], [NAME, VERSION], [\n\n              /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n              /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n              ], [[NAME, /-/g, ' '], VERSION], [\n\n              /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                  // Windows Media Server\n              ], [VERSION, [NAME, 'Windows']], [\n\n              /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n              ], [NAME, VERSION], [\n\n              /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n              /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n              ], [[NAME, 'rad.io'], VERSION]\n\n              //////////////////////\n              // Media players END\n              ////////////////////*/\n\n          ],\n\n          cpu : [[\n\n              /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n              ], [[ARCHITECTURE, 'amd64']], [\n\n              /(ia32(?=;))/i                                                      // IA32 (quicktime)\n              ], [[ARCHITECTURE, util.lowerize]], [\n\n              /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n              ], [[ARCHITECTURE, 'ia32']], [\n\n              // PocketPC mistakenly identified as PowerPC\n              /windows\\s(ce|mobile);\\sppc;/i\n              ], [[ARCHITECTURE, 'arm']], [\n\n              /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n              ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n              /(sun4\\w)[;\\)]/i                                                    // SPARC\n              ], [[ARCHITECTURE, 'sparc']], [\n\n              /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+[;l]))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                  // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n              ], [[ARCHITECTURE, util.lowerize]]\n          ],\n\n          device : [[\n\n              /\\((ipad|playbook);[\\w\\s\\),;-]+(rim|apple)/i                        // iPad/PlayBook\n              ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n              /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n              ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n              /(apple\\s{0,1}tv)/i                                                 // Apple TV\n              ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n              /(archos)\\s(gamepad2?)/i,                                           // Archos\n              /(hp).+(touchpad)/i,                                                // HP TouchPad\n              /(hp).+(tablet)/i,                                                  // HP Tablet\n              /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n              /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n              /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n              ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n              /(kf[A-z]+)\\sbuild\\/.+silk\\//i                                      // Kindle Fire HD\n              ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n              /(sd|kf)[0349hijorstuw]+\\sbuild\\/.+silk\\//i                         // Fire Phone\n              ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n              /android.+aft([bms])\\sbuild/i                                       // Fire TV\n              ], [MODEL, [VENDOR, 'Amazon'], [TYPE, SMARTTV]], [\n\n              /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n              ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n              /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n              ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n              /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n              /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\\s_-]?([\\w-]*)/i,\n                                                                                  // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n              /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n              /(asus)-?(\\w+)/i                                                    // Asus\n              ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n              /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n              ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                  // Asus Tablets\n              /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone|p00c)/i\n              ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n              /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n              /(sony)?(?:sgp.+)\\sbuild\\//i\n              ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n              /android.+\\s([c-g]\\d{4}|so[-l]\\w+)(?=\\sbuild\\/|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n              ], [MODEL, [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n              /\\s(ouya)\\s/i,                                                      // Ouya\n              /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n              ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n              /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n              ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n              /(playstation\\s[34portablevi]+)/i                                   // Playstation\n              ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n              /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n              ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n              /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n              ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n              /(htc)[;_\\s-]+([\\w\\s]+(?=\\)|\\sbuild)|\\w+)/i,                        // HTC\n              /(zte)-(\\w*)/i,                                                     // ZTE\n              /(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]*)/i\n                                                                                  // Alcatel/GeeksPhone/Lenovo/Nexian/Panasonic/Sony\n              ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n              /(nexus\\s9)/i                                                       // HTC Nexus 9\n              ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n              /d\\/huawei([\\w\\s-]+)[;\\)]/i,\n              /(nexus\\s6p)/i                                                      // Huawei\n              ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [\n\n              /(microsoft);\\s(lumia[\\s\\w]+)/i                                     // Microsoft Lumia\n              ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n              /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n              ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n              /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n              ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                  // Motorola\n              /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?:?(\\s4g)?)[\\w\\s]+build\\//i,\n              /mot[\\s-]?(\\w*)/i,\n              /(XT\\d{3,4}) build\\//i,\n              /(nexus\\s6)/i\n              ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n              /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n              ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n              /hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i            // HbbTV devices\n              ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [\n\n              /hbbtv.+maple;(\\d+)/i\n              ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [\n\n              /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n              ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n\n              /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,\n              /((SM-T\\w+))/i\n              ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n              /smart-tv.+(samsung)/i\n              ], [VENDOR, [TYPE, SMARTTV], MODEL], [\n              /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,\n              /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)/i,\n              /sec-((sgh\\w+))/i\n              ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n\n              /sie-(\\w*)/i                                                        // Siemens\n              ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n              /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n              /(nokia)[\\s_-]?([\\w-]*)/i\n              ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n              /android[x\\d\\.\\s;]+\\s([ab][1-7]\\-?[0178a]\\d\\d?)/i                   // Acer\n              ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n              /android.+([vl]k\\-?\\d{3})\\s+build/i                                 // LG Tablet\n              ], [MODEL, [VENDOR, 'LG'], [TYPE, TABLET]], [\n              /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n              ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n              /(lg) netcast\\.tv/i                                                 // LG SmartTV\n              ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n              /(nexus\\s[45])/i,                                                   // LG\n              /lg[e;\\s\\/-]+(\\w*)/i,\n              /android.+lg(\\-?[\\d\\w]+)\\s+build/i\n              ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n              /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n              ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n              /linux;.+((jolla));/i                                               // Jolla\n              ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n              /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n              ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n              /android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i                            // OPPO\n              ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n              /crkey/i                                                            // Google Chromecast\n              ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [\n\n              /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n              ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n              /android.+;\\s(pixel c)[\\s)]/i                                       // Google Pixel C\n              ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [\n\n              /android.+;\\s(pixel( [23])?( xl)?)\\s/i                              // Google Pixel\n              ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [\n\n              /android.+;\\s(\\w+)\\s+build\\/hm\\1/i,                                 // Xiaomi Hongmi 'numeric' models\n              /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,               // Xiaomi Hongmi\n              /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d?\\w?)[\\s_]*(?:plus)?)\\s+build/i,    // Xiaomi Mi\n              /android.+(redmi[\\s\\-_]*(?:note)?(?:[\\s_]*[\\w\\s]+))\\s+build/i       // Redmi Phones\n              ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n              /android.+(mi[\\s\\-_]*(?:pad)(?:[\\s_]*[\\w\\s]+))\\s+build/i            // Mi Pad tablets\n              ],[[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, TABLET]], [\n              /android.+;\\s(m[1-5]\\snote)\\sbuild/i                                // Meizu Tablet\n              ], [MODEL, [VENDOR, 'Meizu'], [TYPE, TABLET]], [\n              /(mz)-([\\w-]{2,})/i                                                 // Meizu Phone\n              ], [[VENDOR, 'Meizu'], MODEL, [TYPE, MOBILE]], [\n\n              /android.+a000(1)\\s+build/i,                                        // OnePlus\n              /android.+oneplus\\s(a\\d{4})\\s+build/i\n              ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n              /android.+[;\\/]\\s*(RCT[\\d\\w]+)\\s+build/i                            // RCA Tablets\n              ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n\n              /android.+[;\\/\\s]+(Venue[\\d\\s]{2,7})\\s+build/i                      // Dell Venue Tablets\n              ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*(Q[T|M][\\d\\w]+)\\s+build/i                         // Verizon Tablet\n              ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s+(Barnes[&\\s]+Noble\\s+|BN[RT])(V?.*)\\s+build/i     // Barnes & Noble Tablet\n              ], [[VENDOR, 'Barnes & Noble'], MODEL, [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s+(TM\\d{3}.*\\b)\\s+build/i                           // Barnes & Noble Tablet\n              ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n\n              /android.+;\\s(k88)\\sbuild/i                                         // ZTE K Series Tablet\n              ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*(gen\\d{3})\\s+build.*49h/i                         // Swiss GEN Mobile\n              ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n\n              /android.+[;\\/]\\s*(zur\\d{3})\\s+build/i                              // Swiss ZUR Tablet\n              ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*((Zeki)?TB.*\\b)\\s+build/i                         // Zeki Tablets\n              ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n\n              /(android).+[;\\/]\\s+([YR]\\d{2})\\s+build/i,\n              /android.+[;\\/]\\s+(Dragon[\\-\\s]+Touch\\s+|DT)(\\w{5})\\sbuild/i        // Dragon Touch Tablet\n              ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*(NS-?\\w{0,9})\\sbuild/i                            // Insignia Tablets\n              ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*((NX|Next)-?\\w{0,9})\\s+build/i                    // NextBook Tablets\n              ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*(Xtreme\\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\\s+build/i\n              ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [                    // Voice Xtreme Phones\n\n              /android.+[;\\/]\\s*(LVTEL\\-)?(V1[12])\\s+build/i                     // LvTel Phones\n              ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n\n              /android.+;\\s(PH-1)\\s/i\n              ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [                // Essential PH-1\n\n              /android.+[;\\/]\\s*(V(100MD|700NA|7011|917G).*\\b)\\s+build/i          // Envizen Tablets\n              ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*(Le[\\s\\-]+Pan)[\\s\\-]+(\\w{1,9})\\s+build/i          // Le Pan Tablets\n              ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*(Trio[\\s\\-]*.*)\\s+build/i                         // MachSpeed Tablets\n              ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*(Trinity)[\\-\\s]*(T\\d{3})\\s+build/i                // Trinity Tablets\n              ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n              /android.+[;\\/]\\s*TU_(1491)\\s+build/i                               // Rotor Tablets\n              ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n\n              /android.+(KS(.+))\\s+build/i                                        // Amazon Kindle Tablets\n              ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n\n              /android.+(Gigaset)[\\s\\-]+(Q\\w{1,9})\\s+build/i                      // Gigaset Tablets\n              ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n              /\\s(tablet|tab)[;\\/]/i,                                             // Unidentifiable Tablet\n              /\\s(mobile)(?:[;\\/]|\\ssafari)/i                                     // Unidentifiable Mobile\n              ], [[TYPE, util.lowerize], VENDOR, MODEL], [\n\n              /[\\s\\/\\(](smart-?tv)[;\\)]/i                                         // SmartTV\n              ], [[TYPE, SMARTTV]], [\n\n              /(android[\\w\\.\\s\\-]{0,9});.+build/i                                 // Generic Android Device\n              ], [MODEL, [VENDOR, 'Generic']]\n\n\n          /*//////////////////////////\n              // TODO: move to string map\n              ////////////////////////////\n\n              /(C6603)/i                                                          // Sony Xperia Z C6603\n              ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n              /(C6903)/i                                                          // Sony Xperia Z 1\n              ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n              /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n              ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n              /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n              ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n              /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n              ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n              /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n              ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n              /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n              ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n              /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n              ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n              /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n              ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n              /(T3C)/i                                                            // Advan Vandroid T3C\n              ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n              /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n              ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n              /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n              ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n              /(V972M)/i                                                          // ZTE V972M\n              ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n              /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n              ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n              /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n              ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n              /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n              ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n              /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n              ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n\n              /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n              ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n              /////////////\n              // END TODO\n              ///////////*/\n\n          ],\n\n          engine : [[\n\n              /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n              ], [VERSION, [NAME, 'EdgeHTML']], [\n\n              /webkit\\/537\\.36.+chrome\\/(?!27)/i                                  // Blink\n              ], [[NAME, 'Blink']], [\n\n              /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n              /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,     \n                                                                                  // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n              /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n              /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n              ], [NAME, VERSION], [\n\n              /rv\\:([\\w\\.]{1,9}).+(gecko)/i                                       // Gecko\n              ], [VERSION, NAME]\n          ],\n\n          os : [[\n\n              // Windows based\n              /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n              ], [NAME, VERSION], [\n              /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n              /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s\\w]*)/i,                   // Windows Phone\n              /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n              ], [[NAME, mapper.str, maps.os.windows.name], [VERSION, mapper.str, maps.os.windows.version]], [\n              /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n              ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n              // Mobile/Embedded OS\n              /\\((bb)(10);/i                                                      // BlackBerry 10\n              ], [[NAME, 'BlackBerry'], VERSION], [\n              /(blackberry)\\w*\\/?([\\w\\.]*)/i,                                     // Blackberry\n              /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n              /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]*)/i,\n                                                                                  // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n              /linux;.+(sailfish);/i                                              // Sailfish OS\n              ], [NAME, VERSION], [\n              /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]*)/i                  // Symbian\n              ], [[NAME, 'Symbian'], VERSION], [\n              /\\((series40);/i                                                    // Series 40\n              ], [NAME], [\n              /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n              ], [[NAME, 'Firefox OS'], VERSION], [\n\n              // Console\n              /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\n\n              // GNU/Linux based\n              /(mint)[\\/\\s\\(]?(\\w*)/i,                                            // Mint\n              /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n              /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]*)/i,\n                                                                                  // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                  // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n              /(hurd|linux)\\s?([\\w\\.]*)/i,                                        // Hurd/Linux\n              /(gnu)\\s?([\\w\\.]*)/i                                                // GNU\n              ], [[NAME, 'Linux'], VERSION], [\n\n              /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n              ], [[NAME, 'Chromium OS'], VERSION],[\n\n              // Solaris\n              /(sunos)\\s?([\\w\\.\\d]*)/i                                            // Solaris\n              ], [[NAME, 'Solaris'], VERSION], [\n\n              // BSD based\n              /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]*)/i                    // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n              ], [[NAME, 'Linux'], VERSION],[\n\n              /(iphone)(?:.*os\\s*([\\w]*)\\slike\\smac|;\\sopera)/i                  // iOS\n              ], [[NAME, 'iPhone'], [VERSION, /_/g, '.']], [\n\n              /(ipad)(?:.*os\\s*([\\w]*)\\slike\\smac|;\\sopera)/i                    // iOS\n              ], [[NAME, 'iPad'], [VERSION, /_/g, '.']], [\n\n              /(haiku)\\s(\\w+)/i                                                   // Haiku\n              ], [NAME, VERSION],[\n\n              /cfnetwork\\/.+darwin/i,\n              /ip[honead]{2,4}(?:.*os\\s([\\w]+)\\slike\\smac|;\\sopera)/i             // iOS\n              ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n\n              /(mac\\sos\\sx)\\s?([\\w\\s\\.]*)/i,\n              /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n              ], [[NAME, 'Mac'], [VERSION, /_/g, '.']], [\n\n              // Other\n              /((?:open)?solaris)[\\/\\s-]?([\\w\\.]*)/i,                             // Solaris\n              /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.])*/i,                                // AIX\n              /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms|fuchsia)/i,\n                                                                                  // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS/Fuchsia\n              /(unix)\\s?([\\w\\.]*)/i                                               // UNIX\n              ], [NAME, VERSION]\n          ]\n      };\n\n\n      /////////////////\n      // Constructor\n      ////////////////\n      /*\n      var Browser = function (name, version) {\n          this[NAME] = name;\n          this[VERSION] = version;\n      };\n      var CPU = function (arch) {\n          this[ARCHITECTURE] = arch;\n      };\n      var Device = function (vendor, model, type) {\n          this[VENDOR] = vendor;\n          this[MODEL] = model;\n          this[TYPE] = type;\n      };\n      var Engine = Browser;\n      var OS = Browser;\n      */\n      var UAParser = function (uastring, extensions) {\n\n          if (typeof uastring === 'object') {\n              extensions = uastring;\n              uastring = undefined$1;\n          }\n\n          if (!(this instanceof UAParser)) {\n              return new UAParser(uastring, extensions).getResult();\n          }\n\n          var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n          var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n          //var browser = new Browser();\n          //var cpu = new CPU();\n          //var device = new Device();\n          //var engine = new Engine();\n          //var os = new OS();\n\n          this.getBrowser = function () {\n              var browser = { name: undefined$1, version: undefined$1 };\n              mapper.rgx.call(browser, ua, rgxmap.browser);\n              browser.major = util.major(browser.version); // deprecated\n              return browser;\n          };\n          this.getCPU = function () {\n              var cpu = { architecture: undefined$1 };\n              mapper.rgx.call(cpu, ua, rgxmap.cpu);\n              return cpu;\n          };\n          this.getDevice = function () {\n              var device = { vendor: undefined$1, model: undefined$1, type: undefined$1 };\n              mapper.rgx.call(device, ua, rgxmap.device);\n              return device;\n          };\n          this.getEngine = function () {\n              var engine = { name: undefined$1, version: undefined$1 };\n              mapper.rgx.call(engine, ua, rgxmap.engine);\n              return engine;\n          };\n          this.getOS = function () {\n              var os = { name: undefined$1, version: undefined$1 };\n              mapper.rgx.call(os, ua, rgxmap.os);\n              return os;\n          };\n          this.getResult = function () {\n              return {\n                  ua      : this.getUA(),\n                  browser : this.getBrowser(),\n                  engine  : this.getEngine(),\n                  os      : this.getOS(),\n                  device  : this.getDevice(),\n                  cpu     : this.getCPU()\n              };\n          };\n          this.getUA = function () {\n              return ua;\n          };\n          this.setUA = function (uastring) {\n              ua = uastring;\n              //browser = new Browser();\n              //cpu = new CPU();\n              //device = new Device();\n              //engine = new Engine();\n              //os = new OS();\n              return this;\n          };\n          return this;\n      };\n\n      UAParser.VERSION = LIBVERSION;\n      UAParser.BROWSER = {\n          NAME    : NAME,\n          MAJOR   : MAJOR, // deprecated\n          VERSION : VERSION\n      };\n      UAParser.CPU = {\n          ARCHITECTURE : ARCHITECTURE\n      };\n      UAParser.DEVICE = {\n          MODEL   : MODEL,\n          VENDOR  : VENDOR,\n          TYPE    : TYPE,\n          CONSOLE : CONSOLE,\n          MOBILE  : MOBILE,\n          SMARTTV : SMARTTV,\n          TABLET  : TABLET,\n          WEARABLE: WEARABLE,\n          EMBEDDED: EMBEDDED\n      };\n      UAParser.ENGINE = {\n          NAME    : NAME,\n          VERSION : VERSION\n      };\n      UAParser.OS = {\n          NAME    : NAME,\n          VERSION : VERSION\n      };\n      //UAParser.Utils = util;\n\n      ///////////\n      // Export\n      //////////\n\n\n      // check js environment\n      {\n          // nodejs env\n          if (module.exports) {\n              exports = module.exports = UAParser;\n          }\n          // TODO: test!!!!!!!!\n          /*\n          if (require && require.main === module && process) {\n              // cli\n              var jsonize = function (arr) {\n                  var res = [];\n                  for (var i in arr) {\n                      res.push(new UAParser(arr[i]).getResult());\n                  }\n                  process.stdout.write(JSON.stringify(res, null, 2) + '\\n');\n              };\n              if (process.stdin.isTTY) {\n                  // via args\n                  jsonize(process.argv.slice(2));\n              } else {\n                  // via pipe\n                  var str = '';\n                  process.stdin.on('readable', function() {\n                      var read = process.stdin.read();\n                      if (read !== null) {\n                          str += read;\n                      }\n                  });\n                  process.stdin.on('end', function () {\n                      jsonize(str.replace(/\\n$/, '').split('\\n'));\n                  });\n              }\n          }\n          */\n          exports.UAParser = UAParser;\n      }\n\n      // jQuery/Zepto specific (optional)\n      // Note:\n      //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n      //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n      //   and we should catch that.\n      var $ = window && (window.jQuery || window.Zepto);\n      if (typeof $ !== UNDEF_TYPE && !$.ua) {\n          var parser = new UAParser();\n          $.ua = parser.getResult();\n          $.ua.get = function () {\n              return parser.getUA();\n          };\n          $.ua.set = function (uastring) {\n              parser.setUA(uastring);\n              var result = parser.getResult();\n              for (var prop in result) {\n                  $.ua[prop] = result[prop];\n              }\n          };\n      }\n\n  })(typeof window === 'object' ? window : commonjsGlobal);\n  });\n  var uaParser_1 = uaParser.UAParser;\n\n  /* jshint bitwise: false, laxbreak: true */\n\n  /**\n   * Source: [jed's gist]{@link https://gist.github.com/982883}.\n   * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n   * where each x is replaced with a random hexadecimal digit from 0 to f, and\n   * y is replaced with a random hexadecimal digit from 8 to b.\n   * Used to generate UUIDs for deviceIds.\n   * @private\n   */\n  var uuid = function uuid(a) {\n    return a // if the placeholder was passed, return\n    ? ( // a random number from 0 to 15\n    a ^ // unless b is 8,\n    Math.random() // in which case\n    * 16 // a random number from\n    >> a / 4 // 8 to 11\n    ).toString(16) // in hexadecimal\n    : ( // or otherwise a concatenated string:\n    [1e7] + // 10000000 +\n    -1e3 + // -1000 +\n    -4e3 + // -4000 +\n    -8e3 + // -80000000 +\n    -1e11 // -100000000000,\n    ).replace( // replacing\n    /[018]/g, // zeroes, ones, and eights with\n    uuid // random hex digits\n    );\n  };\n\n  var version = \"5.9.0\";\n\n  var getLanguage = function getLanguage() {\n    return navigator && (navigator.languages && navigator.languages[0] || navigator.language || navigator.userLanguage) || undefined;\n  };\n\n  var language = {\n    language: getLanguage()\n  };\n\n  var platform = 'Web';\n\n  var DEFAULT_OPTIONS = {\n    apiEndpoint: 'api.amplitude.com',\n    batchEvents: false,\n    cookieExpiration: 365 * 10,\n    cookieName: 'amplitude_id',\n    deviceIdFromUrlParam: false,\n    domain: '',\n    eventUploadPeriodMillis: 30 * 1000,\n    // 30s\n    eventUploadThreshold: 30,\n    forceHttps: true,\n    includeGclid: false,\n    includeReferrer: false,\n    includeUtm: false,\n    language: language.language,\n    logLevel: 'WARN',\n    optOut: false,\n    onError: function onError() {},\n    platform: platform,\n    savedMaxCount: 1000,\n    saveEvents: true,\n    saveParamsReferrerOncePerSession: true,\n    secureCookie: false,\n    sessionTimeout: 30 * 60 * 1000,\n    trackingOptions: {\n      city: true,\n      country: true,\n      carrier: true,\n      device_manufacturer: true,\n      device_model: true,\n      dma: true,\n      ip_address: true,\n      language: true,\n      os_name: true,\n      os_version: true,\n      platform: true,\n      region: true,\n      version_name: true\n    },\n    unsetParamsReferrerOnNewSession: false,\n    unsentKey: 'amplitude_unsent',\n    unsentIdentifyKey: 'amplitude_unsent_identify',\n    uploadBatchSize: 100\n  };\n\n  var AsyncStorage;\n  var DeviceInfo;\n  /**\n   * AmplitudeClient SDK API - instance constructor.\n   * The Amplitude class handles creation of client instances, all you need to do is call amplitude.getInstance()\n   * @constructor AmplitudeClient\n   * @public\n   * @example var amplitudeClient = new AmplitudeClient();\n   */\n\n\n  var AmplitudeClient = function AmplitudeClient(instanceName) {\n    this._instanceName = utils.isEmptyString(instanceName) ? Constants.DEFAULT_INSTANCE : instanceName.toLowerCase();\n    this._legacyStorageSuffix = this._instanceName === Constants.DEFAULT_INSTANCE ? '' : '_' + this._instanceName;\n    this._unsentEvents = [];\n    this._unsentIdentifys = [];\n    this._ua = new uaParser(navigator.userAgent).getResult();\n    this.options = _objectSpread({}, DEFAULT_OPTIONS, {\n      trackingOptions: _objectSpread({}, DEFAULT_OPTIONS.trackingOptions)\n    });\n    this.cookieStorage = new cookieStorage().getStorage();\n    this._q = []; // queue for proxied functions before script load\n\n    this._sending = false;\n    this._updateScheduled = false;\n    this._onInit = []; // event meta data\n\n    this._eventId = 0;\n    this._identifyId = 0;\n    this._lastEventTime = null;\n    this._newSession = false;\n    this._sequenceNumber = 0;\n    this._sessionId = null;\n    this._isInitialized = false;\n    this._userAgent = navigator && navigator.userAgent || null;\n  };\n\n  AmplitudeClient.prototype.Identify = Identify;\n  AmplitudeClient.prototype.Revenue = Revenue;\n  /**\n   * Initializes the Amplitude Javascript SDK with your apiKey and any optional configurations.\n   * This is required before any other methods can be called.\n   * @public\n   * @param {string} apiKey - The API key for your app.\n   * @param {string} opt_userId - (optional) An identifier for this user.\n   * @param {object} opt_config - (optional) Configuration options.\n   * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#configuration-options} for list of options and default values.\n   * @param {function} opt_callback - (optional) Provide a callback function to run after initialization is complete.\n   * @example amplitudeClient.init('API_KEY', 'USER_ID', {includeReferrer: true, includeUtm: true}, function() { alert('init complete'); });\n   */\n\n  AmplitudeClient.prototype.init = function init(apiKey, opt_userId, opt_config, opt_callback) {\n    var _this = this;\n\n    if (type(apiKey) !== 'string' || utils.isEmptyString(apiKey)) {\n      utils.log.error('Invalid apiKey. Please re-initialize with a valid apiKey');\n      return;\n    }\n\n    try {\n      this.options.apiKey = apiKey;\n      this._storageSuffix = '_' + apiKey + this._legacyStorageSuffix;\n      var hasExistingCookie = !!this.cookieStorage.get(this.options.cookieName + this._storageSuffix);\n\n      if (opt_config && opt_config.deferInitialization && !hasExistingCookie) {\n        this._deferInitialization(apiKey, opt_userId, opt_config, opt_callback);\n\n        return;\n      }\n\n      _parseConfig(this.options, opt_config);\n\n      if (type(this.options.logLevel) === 'string') {\n        utils.setLogLevel(this.options.logLevel);\n      }\n\n      var trackingOptions = _generateApiPropertiesTrackingConfig(this);\n\n      this._apiPropertiesTrackingOptions = Object.keys(trackingOptions).length > 0 ? {\n        tracking_options: trackingOptions\n      } : {};\n      this.cookieStorage.options({\n        expirationDays: this.options.cookieExpiration,\n        domain: this.options.domain,\n        secure: this.options.secureCookie\n      });\n      this.options.domain = this.cookieStorage.options().domain;\n\n      {\n        if (this._instanceName === Constants.DEFAULT_INSTANCE) {\n          _upgradeCookieData(this);\n        }\n      }\n\n      _loadCookieData(this);\n\n      this._pendingReadStorage = true;\n\n      var initFromStorage = function initFromStorage(deviceId) {\n        // load deviceId and userId from input, or try to fetch existing value from cookie\n        _this.options.deviceId = type(opt_config) === 'object' && type(opt_config.deviceId) === 'string' && !utils.isEmptyString(opt_config.deviceId) && opt_config.deviceId || _this.options.deviceIdFromUrlParam && _this._getDeviceIdFromUrlParam(_this._getUrlParams()) || _this.options.deviceId || deviceId || uuid() + 'R';\n        _this.options.userId = type(opt_userId) === 'string' && !utils.isEmptyString(opt_userId) && opt_userId || type(opt_userId) === 'number' && opt_userId.toString() || _this.options.userId || null;\n        var now = new Date().getTime();\n\n        if (!_this._sessionId || !_this._lastEventTime || now - _this._lastEventTime > _this.options.sessionTimeout) {\n          if (_this.options.unsetParamsReferrerOnNewSession) {\n            _this._unsetUTMParams();\n          }\n\n          _this._newSession = true;\n          _this._sessionId = now; // only capture UTM params and referrer if new session\n\n          if (_this.options.saveParamsReferrerOncePerSession) {\n            _this._trackParamsAndReferrer();\n          }\n        }\n\n        if (!_this.options.saveParamsReferrerOncePerSession) {\n          _this._trackParamsAndReferrer();\n        } // load unsent events and identifies before any attempt to log new ones\n\n\n        if (_this.options.saveEvents) {\n          // validate event properties for unsent events\n          for (var i = 0; i < _this._unsentEvents.length; i++) {\n            var eventProperties = _this._unsentEvents[i].event_properties;\n            var groups = _this._unsentEvents[i].groups;\n            _this._unsentEvents[i].event_properties = utils.validateProperties(eventProperties);\n            _this._unsentEvents[i].groups = utils.validateGroups(groups);\n          } // validate user properties for unsent identifys\n\n\n          for (var j = 0; j < _this._unsentIdentifys.length; j++) {\n            var userProperties = _this._unsentIdentifys[j].user_properties;\n            var identifyGroups = _this._unsentIdentifys[j].groups;\n            _this._unsentIdentifys[j].user_properties = utils.validateProperties(userProperties);\n            _this._unsentIdentifys[j].groups = utils.validateGroups(identifyGroups);\n          }\n        }\n\n        _this._lastEventTime = now;\n\n        _saveCookieData(_this);\n\n        _this._pendingReadStorage = false;\n\n        _this._sendEventsIfReady(); // try sending unsent events\n\n\n        for (var _i = 0; _i < _this._onInit.length; _i++) {\n          _this._onInit[_i]();\n        }\n\n        _this._onInit = [];\n        _this._isInitialized = true;\n      };\n\n      if (AsyncStorage) {\n        this._migrateUnsentEvents(function () {\n          Promise.all([AsyncStorage.getItem(_this._storageSuffix), AsyncStorage.getItem(_this.options.unsentKey + _this._storageSuffix), AsyncStorage.getItem(_this.options.unsentIdentifyKey + _this._storageSuffix)]).then(function (values) {\n            if (values[0]) {\n              var cookieData = JSON.parse(values[0]);\n\n              if (cookieData) {\n                _loadCookieDataProps(_this, cookieData);\n              }\n            }\n\n            if (_this.options.saveEvents) {\n              _this._unsentEvents = _this._parseSavedUnsentEventsString(values[1]).concat(_this._unsentEvents);\n              _this._unsentIdentifys = _this._parseSavedUnsentEventsString(values[2]).concat(_this._unsentIdentifys);\n            }\n\n            if (DeviceInfo) {\n              Promise.all([DeviceInfo.getCarrier(), DeviceInfo.getModel(), DeviceInfo.getManufacturer(), DeviceInfo.getVersion(), DeviceInfo.getUniqueId()]).then(function (values) {\n                _this.deviceInfo = {\n                  carrier: values[0],\n                  model: values[1],\n                  manufacturer: values[2],\n                  version: values[3]\n                };\n                initFromStorage(values[4]);\n\n                _this.runQueuedFunctions();\n\n                if (type(opt_callback) === 'function') {\n                  opt_callback(_this);\n                }\n              }).catch(function (err) {\n                _this.options.onError(err);\n              });\n            } else {\n              initFromStorage();\n\n              _this.runQueuedFunctions();\n            }\n          }).catch(function (err) {\n            _this.options.onError(err);\n          });\n        });\n      } else {\n        if (this.options.saveEvents) {\n          this._unsentEvents = this._loadSavedUnsentEvents(this.options.unsentKey).concat(this._unsentEvents);\n          this._unsentIdentifys = this._loadSavedUnsentEvents(this.options.unsentIdentifyKey).concat(this._unsentIdentifys);\n        }\n\n        initFromStorage();\n        this.runQueuedFunctions();\n\n        if (type(opt_callback) === 'function') {\n          opt_callback(this);\n        }\n      }\n    } catch (err) {\n      utils.log.error(err);\n      this.options.onError(err);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._migrateUnsentEvents = function _migrateUnsentEvents(cb) {\n    var _this2 = this;\n\n    Promise.all([AsyncStorage.getItem(this.options.unsentKey), AsyncStorage.getItem(this.options.unsentIdentifyKey)]).then(function (values) {\n      if (_this2.options.saveEvents) {\n        var unsentEventsString = values[0];\n        var unsentIdentifyKey = values[1];\n        var itemsToSet = [];\n        var itemsToRemove = [];\n\n        if (!!unsentEventsString) {\n          itemsToSet.push(AsyncStorage.setItem(_this2.options.unsentKey + _this2._storageSuffix, JSON.stringify(unsentEventsString)));\n          itemsToRemove.push(AsyncStorage.removeItem(_this2.options.unsentKey));\n        }\n\n        if (!!unsentIdentifyKey) {\n          itemsToSet.push(AsyncStorage.setItem(_this2.options.unsentIdentifyKey + _this2._storageSuffix, JSON.stringify(unsentIdentifyKey)));\n          itemsToRemove.push(AsyncStorage.removeItem(_this2.options.unsentIdentifyKey));\n        }\n\n        if (itemsToSet.length > 0) {\n          Promise.all(itemsToSet).then(function () {\n          }).catch(function (err) {\n            _this2.options.onError(err);\n          });\n        }\n      }\n    }).then(cb).catch(function (err) {\n      _this2.options.onError(err);\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._trackParamsAndReferrer = function _trackParamsAndReferrer() {\n    if (this.options.includeUtm) {\n      this._initUtmData();\n    }\n\n    if (this.options.includeReferrer) {\n      this._saveReferrer(this._getReferrer());\n    }\n\n    if (this.options.includeGclid) {\n      this._saveGclid(this._getUrlParams());\n    }\n  };\n  /**\n   * Parse and validate user specified config values and overwrite existing option value\n   * DEFAULT_OPTIONS provides list of all config keys that are modifiable, as well as expected types for values\n   * @private\n   */\n\n\n  var _parseConfig = function _parseConfig(options, config) {\n    if (type(config) !== 'object') {\n      return;\n    } // validates config value is defined, is the correct type, and some additional value sanity checks\n\n\n    var parseValidateAndLoad = function parseValidateAndLoad(key) {\n      if (!options.hasOwnProperty(key)) {\n        return; // skip bogus config values\n      }\n\n      var inputValue = config[key];\n      var expectedType = type(options[key]);\n\n      if (!utils.validateInput(inputValue, key + ' option', expectedType)) {\n        return;\n      }\n\n      if (expectedType === 'boolean') {\n        options[key] = !!inputValue;\n      } else if (expectedType === 'string' && !utils.isEmptyString(inputValue) || expectedType === 'number' && inputValue > 0) {\n        options[key] = inputValue;\n      } else if (expectedType === 'object') {\n        _parseConfig(options[key], inputValue);\n      }\n    };\n\n    for (var key in config) {\n      if (config.hasOwnProperty(key)) {\n        parseValidateAndLoad(key);\n      }\n    }\n  };\n  /**\n   * Run functions queued up by proxy loading snippet\n   * @private\n   */\n\n\n  AmplitudeClient.prototype.runQueuedFunctions = function () {\n    var queue = this._q;\n    this._q = [];\n\n    for (var i = 0; i < queue.length; i++) {\n      var fn = this[queue[i][0]];\n\n      if (type(fn) === 'function') {\n        fn.apply(this, queue[i].slice(1));\n      }\n    }\n  };\n  /**\n   * Check that the apiKey is set before calling a function. Logs a warning message if not set.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._apiKeySet = function _apiKeySet(methodName) {\n    if (utils.isEmptyString(this.options.apiKey)) {\n      utils.log.error('Invalid apiKey. Please set a valid apiKey with init() before calling ' + methodName);\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * Load saved events from localStorage. JSON deserializes event array. Handles case where string is corrupted.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._loadSavedUnsentEvents = function _loadSavedUnsentEvents(unsentKey) {\n    var savedUnsentEventsString = this._getFromStorage(localStorage$1, unsentKey);\n\n    var unsentEvents = this._parseSavedUnsentEventsString(savedUnsentEventsString, unsentKey);\n\n    this._setInStorage(localStorage$1, unsentKey, JSON.stringify(unsentEvents));\n\n    return unsentEvents;\n  };\n  /**\n   * Load saved events from localStorage. JSON deserializes event array. Handles case where string is corrupted.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._parseSavedUnsentEventsString = function _parseSavedUnsentEventsString(savedUnsentEventsString, unsentKey) {\n    if (utils.isEmptyString(savedUnsentEventsString)) {\n      return []; // new app, does not have any saved events\n    }\n\n    if (type(savedUnsentEventsString) === 'string') {\n      try {\n        var events = JSON.parse(savedUnsentEventsString);\n\n        if (type(events) === 'array') {\n          // handle case where JSON dumping of unsent events is corrupted\n          return events;\n        }\n      } catch (e) {}\n    }\n\n    utils.log.error('Unable to load ' + unsentKey + ' events. Restart with a new empty queue.');\n    return [];\n  };\n  /**\n   * Returns true if a new session was created during initialization, otherwise false.\n   * @public\n   * @return {boolean} Whether a new session was created during initialization.\n   */\n\n\n  AmplitudeClient.prototype.isNewSession = function isNewSession() {\n    return this._newSession;\n  };\n  /**\n   * Store callbacks to call after init\n   * @private\n   */\n\n\n  AmplitudeClient.prototype.onInit = function (callback) {\n    if (this._isInitialized) {\n      callback();\n    } else {\n      this._onInit.push(callback);\n    }\n  };\n  /**\n   * Returns the id of the current session.\n   * @public\n   * @return {number} Id of the current session.\n   */\n\n\n  AmplitudeClient.prototype.getSessionId = function getSessionId() {\n    return this._sessionId;\n  };\n  /**\n   * Increments the eventId and returns it.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype.nextEventId = function nextEventId() {\n    this._eventId++;\n    return this._eventId;\n  };\n  /**\n   * Increments the identifyId and returns it.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype.nextIdentifyId = function nextIdentifyId() {\n    this._identifyId++;\n    return this._identifyId;\n  };\n  /**\n   * Increments the sequenceNumber and returns it.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype.nextSequenceNumber = function nextSequenceNumber() {\n    this._sequenceNumber++;\n    return this._sequenceNumber;\n  };\n  /**\n   * Returns the total count of unsent events and identifys\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._unsentCount = function _unsentCount() {\n    return this._unsentEvents.length + this._unsentIdentifys.length;\n  };\n  /**\n   * Send events if ready. Returns true if events are sent.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._sendEventsIfReady = function _sendEventsIfReady(callback) {\n    if (this._unsentCount() === 0) {\n      return false;\n    } // if batching disabled, send any unsent events immediately\n\n\n    if (!this.options.batchEvents) {\n      this.sendEvents(callback);\n      return true;\n    } // if batching enabled, check if min threshold met for batch size\n\n\n    if (this._unsentCount() >= this.options.eventUploadThreshold) {\n      this.sendEvents(callback);\n      return true;\n    } // otherwise schedule an upload after 30s\n\n\n    if (!this._updateScheduled) {\n      // make sure we only schedule 1 upload\n      this._updateScheduled = true;\n      setTimeout(function () {\n        this._updateScheduled = false;\n        this.sendEvents();\n      }.bind(this), this.options.eventUploadPeriodMillis);\n    }\n\n    return false; // an upload was scheduled, no events were uploaded\n  };\n  /**\n   * Helper function to fetch values from storage\n   * Storage argument allows for localStoraoge and sessionStoraoge\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._getFromStorage = function _getFromStorage(storage, key) {\n    return storage.getItem(key + this._storageSuffix);\n  };\n  /**\n   * Helper function to set values in storage\n   * Storage argument allows for localStoraoge and sessionStoraoge\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._setInStorage = function _setInStorage(storage, key, value) {\n    storage.setItem(key + this._storageSuffix, value);\n  };\n\n  var _upgradeCookieData = function _upgradeCookieData(scope) {\n    // skip if already migrated to 4.10+\n    var cookieData = scope.cookieStorage.get(scope.options.cookieName + scope._storageSuffix);\n\n    if (type(cookieData) === 'object') {\n      return;\n    } // skip if already migrated to 2.70+\n\n\n    cookieData = scope.cookieStorage.get(scope.options.cookieName + scope._legacyStorageSuffix);\n\n    if (type(cookieData) === 'object' && cookieData.deviceId && cookieData.sessionId && cookieData.lastEventTime) {\n      return;\n    }\n\n    var _getAndRemoveFromLocalStorage = function _getAndRemoveFromLocalStorage(key) {\n      var value = localStorage$1.getItem(key);\n      localStorage$1.removeItem(key);\n      return value;\n    }; // in v2.6.0, deviceId, userId, optOut was migrated to localStorage with keys + first 6 char of apiKey\n\n\n    var apiKeySuffix = type(scope.options.apiKey) === 'string' && '_' + scope.options.apiKey.slice(0, 6) || '';\n\n    var localStorageDeviceId = _getAndRemoveFromLocalStorage(Constants.DEVICE_ID + apiKeySuffix);\n\n    var localStorageUserId = _getAndRemoveFromLocalStorage(Constants.USER_ID + apiKeySuffix);\n\n    var localStorageOptOut = _getAndRemoveFromLocalStorage(Constants.OPT_OUT + apiKeySuffix);\n\n    if (localStorageOptOut !== null && localStorageOptOut !== undefined) {\n      localStorageOptOut = String(localStorageOptOut) === 'true'; // convert to boolean\n    } // pre-v2.7.0 event and session meta-data was stored in localStorage. move to cookie for sub-domain support\n\n\n    var localStorageSessionId = parseInt(_getAndRemoveFromLocalStorage(Constants.SESSION_ID));\n    var localStorageLastEventTime = parseInt(_getAndRemoveFromLocalStorage(Constants.LAST_EVENT_TIME));\n    var localStorageEventId = parseInt(_getAndRemoveFromLocalStorage(Constants.LAST_EVENT_ID));\n    var localStorageIdentifyId = parseInt(_getAndRemoveFromLocalStorage(Constants.LAST_IDENTIFY_ID));\n    var localStorageSequenceNumber = parseInt(_getAndRemoveFromLocalStorage(Constants.LAST_SEQUENCE_NUMBER));\n\n    var _getFromCookie = function _getFromCookie(key) {\n      return type(cookieData) === 'object' && cookieData[key];\n    };\n\n    scope.options.deviceId = _getFromCookie('deviceId') || localStorageDeviceId;\n    scope.options.userId = _getFromCookie('userId') || localStorageUserId;\n    scope._sessionId = _getFromCookie('sessionId') || localStorageSessionId || scope._sessionId;\n    scope._lastEventTime = _getFromCookie('lastEventTime') || localStorageLastEventTime || scope._lastEventTime;\n    scope._eventId = _getFromCookie('eventId') || localStorageEventId || scope._eventId;\n    scope._identifyId = _getFromCookie('identifyId') || localStorageIdentifyId || scope._identifyId;\n    scope._sequenceNumber = _getFromCookie('sequenceNumber') || localStorageSequenceNumber || scope._sequenceNumber; // optOut is a little trickier since it is a boolean\n\n    scope.options.optOut = localStorageOptOut || false;\n\n    if (cookieData && cookieData.optOut !== undefined && cookieData.optOut !== null) {\n      scope.options.optOut = String(cookieData.optOut) === 'true';\n    }\n\n    _saveCookieData(scope);\n  };\n  /**\n   * Fetches deviceId, userId, event meta data from amplitude cookie\n   * @private\n   */\n\n\n  var _loadCookieData = function _loadCookieData(scope) {\n    var cookieData = scope.cookieStorage.get(scope.options.cookieName + scope._storageSuffix);\n\n    if (type(cookieData) === 'object') {\n      _loadCookieDataProps(scope, cookieData);\n    } else {\n      var legacyCookieData = scope.cookieStorage.get(scope.options.cookieName + scope._legacyStorageSuffix);\n\n      if (type(legacyCookieData) === 'object') {\n        scope.cookieStorage.remove(scope.options.cookieName + scope._legacyStorageSuffix);\n\n        _loadCookieDataProps(scope, legacyCookieData);\n      }\n    }\n  };\n\n  var _loadCookieDataProps = function _loadCookieDataProps(scope, cookieData) {\n    if (cookieData.deviceId) {\n      scope.options.deviceId = cookieData.deviceId;\n    }\n\n    if (cookieData.userId) {\n      scope.options.userId = cookieData.userId;\n    }\n\n    if (cookieData.optOut !== null && cookieData.optOut !== undefined) {\n      // Do not clobber config opt out value if cookieData has optOut as false\n      if (cookieData.optOut !== false) {\n        scope.options.optOut = cookieData.optOut;\n      }\n    }\n\n    if (cookieData.sessionId) {\n      scope._sessionId = parseInt(cookieData.sessionId);\n    }\n\n    if (cookieData.lastEventTime) {\n      scope._lastEventTime = parseInt(cookieData.lastEventTime);\n    }\n\n    if (cookieData.eventId) {\n      scope._eventId = parseInt(cookieData.eventId);\n    }\n\n    if (cookieData.identifyId) {\n      scope._identifyId = parseInt(cookieData.identifyId);\n    }\n\n    if (cookieData.sequenceNumber) {\n      scope._sequenceNumber = parseInt(cookieData.sequenceNumber);\n    }\n  };\n  /**\n   * Saves deviceId, userId, event meta data to amplitude cookie\n   * @private\n   */\n\n\n  var _saveCookieData = function _saveCookieData(scope) {\n    var cookieData = {\n      deviceId: scope.options.deviceId,\n      userId: scope.options.userId,\n      optOut: scope.options.optOut,\n      sessionId: scope._sessionId,\n      lastEventTime: scope._lastEventTime,\n      eventId: scope._eventId,\n      identifyId: scope._identifyId,\n      sequenceNumber: scope._sequenceNumber\n    };\n\n    if (AsyncStorage) {\n      AsyncStorage.setItem(scope._storageSuffix, JSON.stringify(cookieData));\n    }\n\n    scope.cookieStorage.set(scope.options.cookieName + scope._storageSuffix, cookieData);\n  };\n  /**\n   * Parse the utm properties out of cookies and query for adding to user properties.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._initUtmData = function _initUtmData(queryParams, cookieParams) {\n    queryParams = queryParams || this._getUrlParams();\n    cookieParams = cookieParams || this.cookieStorage.get('__utmz');\n    var utmProperties = getUtmData(cookieParams, queryParams);\n\n    _sendParamsReferrerUserProperties(this, utmProperties);\n  };\n  /**\n   * Unset the utm params from the Amplitude instance and update the identify.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._unsetUTMParams = function _unsetUTMParams() {\n    var identify = new Identify();\n    identify.unset(Constants.REFERRER);\n    identify.unset(Constants.UTM_SOURCE);\n    identify.unset(Constants.UTM_MEDIUM);\n    identify.unset(Constants.UTM_CAMPAIGN);\n    identify.unset(Constants.UTM_TERM);\n    identify.unset(Constants.UTM_CONTENT);\n    this.identify(identify);\n  };\n  /**\n   * The calling function should determine when it is appropriate to send these user properties. This function\n   * will no longer contain any session storage checking logic.\n   * @private\n   */\n\n\n  var _sendParamsReferrerUserProperties = function _sendParamsReferrerUserProperties(scope, userProperties) {\n    if (type(userProperties) !== 'object' || Object.keys(userProperties).length === 0) {\n      return;\n    } // setOnce the initial user properties\n\n\n    var identify = new Identify();\n\n    for (var key in userProperties) {\n      if (userProperties.hasOwnProperty(key)) {\n        identify.setOnce('initial_' + key, userProperties[key]);\n        identify.set(key, userProperties[key]);\n      }\n    }\n\n    scope.identify(identify);\n  };\n  /**\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._getReferrer = function _getReferrer() {\n    return document.referrer;\n  };\n  /**\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._getUrlParams = function _getUrlParams() {\n    return location.search;\n  };\n  /**\n   * Try to fetch Google Gclid from url params.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._saveGclid = function _saveGclid(urlParams) {\n    var gclid = utils.getQueryParam('gclid', urlParams);\n\n    if (utils.isEmptyString(gclid)) {\n      return;\n    }\n\n    var gclidProperties = {\n      'gclid': gclid\n    };\n\n    _sendParamsReferrerUserProperties(this, gclidProperties);\n  };\n  /**\n   * Try to fetch Amplitude device id from url params.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._getDeviceIdFromUrlParam = function _getDeviceIdFromUrlParam(urlParams) {\n    return utils.getQueryParam(Constants.AMP_DEVICE_ID_PARAM, urlParams);\n  };\n  /**\n   * Parse the domain from referrer info\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._getReferringDomain = function _getReferringDomain(referrer) {\n    if (utils.isEmptyString(referrer)) {\n      return null;\n    }\n\n    var parts = referrer.split('/');\n\n    if (parts.length >= 3) {\n      return parts[2];\n    }\n\n    return null;\n  };\n  /**\n   * Fetch the referrer information, parse the domain and send.\n   * Since user properties are propagated on the server, only send once per session, don't need to send with every event\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._saveReferrer = function _saveReferrer(referrer) {\n    if (utils.isEmptyString(referrer)) {\n      return;\n    }\n\n    var referrerInfo = {\n      'referrer': referrer,\n      'referring_domain': this._getReferringDomain(referrer)\n    };\n\n    _sendParamsReferrerUserProperties(this, referrerInfo);\n  };\n  /**\n   * Saves unsent events and identifies to localStorage. JSON stringifies event queues before saving.\n   * Note: this is called automatically every time events are logged, unless you explicitly set option saveEvents to false.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype.saveEvents = function saveEvents() {\n    try {\n      if (AsyncStorage) {\n        AsyncStorage.setItem(this.options.unsentKey + this._storageSuffix, JSON.stringify(this._unsentEvents));\n      } else {\n        this._setInStorage(localStorage$1, this.options.unsentKey, JSON.stringify(this._unsentEvents));\n      }\n    } catch (e) {}\n\n    try {\n      if (AsyncStorage) {\n        AsyncStorage.setItem(this.options.unsentIdentifyKey + this._storageSuffix, JSON.stringify(this._unsentIdentifys));\n      } else {\n        this._setInStorage(localStorage$1, this.options.unsentIdentifyKey, JSON.stringify(this._unsentIdentifys));\n      }\n    } catch (e) {}\n  };\n  /**\n   * Sets a customer domain for the amplitude cookie. Useful if you want to support cross-subdomain tracking.\n   * @public\n   * @param {string} domain to set.\n   * @example amplitudeClient.setDomain('.amplitude.com');\n   */\n\n\n  AmplitudeClient.prototype.setDomain = function setDomain(domain) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['setDomain'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!utils.validateInput(domain, 'domain', 'string')) {\n      return;\n    }\n\n    try {\n      this.cookieStorage.options({\n        expirationDays: this.options.cookieExpiration,\n        secure: this.options.secureCookie,\n        domain: domain\n      });\n      this.options.domain = this.cookieStorage.options().domain;\n\n      _loadCookieData(this);\n\n      _saveCookieData(this);\n    } catch (e) {\n      utils.log.error(e);\n    }\n  };\n  /**\n   * Sets an identifier for the current user.\n   * @public\n   * @param {string} userId - identifier to set. Can be null.\n   * @example amplitudeClient.setUserId('joe@gmail.com');\n   */\n\n\n  AmplitudeClient.prototype.setUserId = function setUserId(userId) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['setUserId'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    try {\n      this.options.userId = userId !== undefined && userId !== null && '' + userId || null;\n\n      _saveCookieData(this);\n    } catch (e) {\n      utils.log.error(e);\n    }\n  };\n  /**\n   * Add user to a group or groups. You need to specify a groupType and groupName(s).\n   * For example you can group people by their organization.\n   * In that case groupType is \"orgId\" and groupName would be the actual ID(s).\n   * groupName can be a string or an array of strings to indicate a user in multiple gruups.\n   * You can also call setGroup multiple times with different groupTypes to track multiple types of groups (up to 5 per app).\n   * Note: this will also set groupType: groupName as a user property.\n   * See the [SDK Readme]{@link https://github.com/amplitude/Amplitude-Javascript#setting-groups} for more information.\n   * @public\n   * @param {string} groupType - the group type (ex: orgId)\n   * @param {string|list} groupName - the name of the group (ex: 15), or a list of names of the groups\n   * @example amplitudeClient.setGroup('orgId', 15); // this adds the current user to orgId 15.\n   */\n\n\n  AmplitudeClient.prototype.setGroup = function (groupType, groupName) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['setGroup'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!this._apiKeySet('setGroup()') || !utils.validateInput(groupType, 'groupType', 'string') || utils.isEmptyString(groupType)) {\n      return;\n    }\n\n    var groups = {};\n    groups[groupType] = groupName;\n    var identify = new Identify().set(groupType, groupName);\n\n    this._logEvent(Constants.IDENTIFY_EVENT, null, null, identify.userPropertiesOperations, groups, null, null, null);\n  };\n  /**\n   * Sets whether to opt current user out of tracking.\n   * @public\n   * @param {boolean} enable - if true then no events will be logged or sent.\n   * @example: amplitude.setOptOut(true);\n   */\n\n\n  AmplitudeClient.prototype.setOptOut = function setOptOut(enable) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['setOptOut'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!utils.validateInput(enable, 'enable', 'boolean')) {\n      return;\n    }\n\n    try {\n      this.options.optOut = enable;\n\n      _saveCookieData(this);\n    } catch (e) {\n      utils.log.error(e);\n    }\n  };\n\n  AmplitudeClient.prototype.setSessionId = function setSessionId(sessionId) {\n    if (!utils.validateInput(sessionId, 'sessionId', 'number')) {\n      return;\n    }\n\n    try {\n      this._sessionId = sessionId;\n\n      _saveCookieData(this);\n    } catch (e) {\n      utils.log.error(e);\n    }\n  };\n\n  AmplitudeClient.prototype.resetSessionId = function resetSessionId() {\n    this.setSessionId(new Date().getTime());\n  };\n  /**\n    * Regenerates a new random deviceId for current user. Note: this is not recommended unless you know what you\n    * are doing. This can be used in conjunction with `setUserId(null)` to anonymize users after they log out.\n    * With a null userId and a completely new deviceId, the current user would appear as a brand new user in dashboard.\n    * This uses src/uuid.js to regenerate the deviceId.\n    * @public\n    */\n\n\n  AmplitudeClient.prototype.regenerateDeviceId = function regenerateDeviceId() {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['regenerateDeviceId'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    this.setDeviceId(uuid() + 'R');\n  };\n  /**\n    * Sets a custom deviceId for current user. Note: this is not recommended unless you know what you are doing\n    * (like if you have your own system for managing deviceIds). Make sure the deviceId you set is sufficiently unique\n    * (we recommend something like a UUID - see src/uuid.js for an example of how to generate) to prevent conflicts with other devices in our system.\n    * @public\n    * @param {string} deviceId - custom deviceId for current user.\n    * @example amplitudeClient.setDeviceId('45f0954f-eb79-4463-ac8a-233a6f45a8f0');\n    */\n\n\n  AmplitudeClient.prototype.setDeviceId = function setDeviceId(deviceId) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['setDeviceId'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!utils.validateInput(deviceId, 'deviceId', 'string')) {\n      return;\n    }\n\n    try {\n      if (!utils.isEmptyString(deviceId)) {\n        this.options.deviceId = '' + deviceId;\n\n        _saveCookieData(this);\n      }\n    } catch (e) {\n      utils.log.error(e);\n    }\n  };\n  /**\n   * Sets user properties for the current user.\n   * @public\n   * @param {object} - object with string keys and values for the user properties to set.\n   * @param {boolean} - DEPRECATED opt_replace: in earlier versions of the JS SDK the user properties object was kept in\n   * memory and replace = true would replace the object in memory. Now the properties are no longer stored in memory, so replace is deprecated.\n   * @example amplitudeClient.setUserProperties({'gender': 'female', 'sign_up_complete': true})\n   */\n\n\n  AmplitudeClient.prototype.setUserProperties = function setUserProperties(userProperties) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['setUserProperties'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!this._apiKeySet('setUserProperties()') || !utils.validateInput(userProperties, 'userProperties', 'object')) {\n      return;\n    } // sanitize the userProperties dict before converting into identify\n\n\n    var sanitized = utils.truncate(utils.validateProperties(userProperties));\n\n    if (Object.keys(sanitized).length === 0) {\n      return;\n    } // convert userProperties into an identify call\n\n\n    var identify = new Identify();\n\n    for (var property in sanitized) {\n      if (sanitized.hasOwnProperty(property)) {\n        identify.set(property, sanitized[property]);\n      }\n    }\n\n    this.identify(identify);\n  };\n  /**\n   * Clear all of the user properties for the current user. Note: clearing user properties is irreversible!\n   * @public\n   * @example amplitudeClient.clearUserProperties();\n   */\n\n\n  AmplitudeClient.prototype.clearUserProperties = function clearUserProperties() {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['clearUserProperties'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!this._apiKeySet('clearUserProperties()')) {\n      return;\n    }\n\n    var identify = new Identify();\n    identify.clearAll();\n    this.identify(identify);\n  };\n  /**\n   * Applies the proxied functions on the proxied object to an instance of the real object.\n   * Used to convert proxied Identify and Revenue objects.\n   * @private\n   */\n\n\n  var _convertProxyObjectToRealObject = function _convertProxyObjectToRealObject(instance, proxy) {\n    for (var i = 0; i < proxy._q.length; i++) {\n      var fn = instance[proxy._q[i][0]];\n\n      if (type(fn) === 'function') {\n        fn.apply(instance, proxy._q[i].slice(1));\n      }\n    }\n\n    return instance;\n  };\n  /**\n   * Send an identify call containing user property operations to Amplitude servers.\n   * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#user-properties-and-user-property-operations}\n   * for more information on the Identify API and user property operations.\n   * @param {Identify} identify_obj - the Identify object containing the user property operations to send.\n   * @param {Amplitude~eventCallback} opt_callback - (optional) callback function to run when the identify event has been sent.\n   * Note: the server response code and response body from the identify event upload are passed to the callback function.\n   * @example\n   * var identify = new amplitude.Identify().set('colors', ['rose', 'gold']).add('karma', 1).setOnce('sign_up_date', '2016-03-31');\n   * amplitude.identify(identify);\n   */\n\n\n  AmplitudeClient.prototype.identify = function (identify_obj, opt_callback) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['identify'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!this._apiKeySet('identify()')) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'API key is not set'\n        });\n      }\n\n      return;\n    } // if identify input is a proxied object created by the async loading snippet, convert it into an identify object\n\n\n    if (type(identify_obj) === 'object' && identify_obj.hasOwnProperty('_q')) {\n      identify_obj = _convertProxyObjectToRealObject(new Identify(), identify_obj);\n    }\n\n    if (identify_obj instanceof Identify) {\n      // only send if there are operations\n      if (Object.keys(identify_obj.userPropertiesOperations).length > 0) {\n        return this._logEvent(Constants.IDENTIFY_EVENT, null, null, identify_obj.userPropertiesOperations, null, null, null, opt_callback);\n      } else {\n        if (type(opt_callback) === 'function') {\n          opt_callback(0, 'No request sent', {\n            reason: 'No user property operations'\n          });\n        }\n      }\n    } else {\n      utils.log.error('Invalid identify input type. Expected Identify object but saw ' + type(identify_obj));\n\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'Invalid identify input type'\n        });\n      }\n    }\n  };\n\n  AmplitudeClient.prototype.groupIdentify = function (group_type, group_name, identify_obj, opt_callback) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['groupIdentify'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!this._apiKeySet('groupIdentify()')) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'API key is not set'\n        });\n      }\n\n      return;\n    }\n\n    if (!utils.validateInput(group_type, 'group_type', 'string') || utils.isEmptyString(group_type)) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'Invalid group type'\n        });\n      }\n\n      return;\n    }\n\n    if (group_name === null || group_name === undefined) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'Invalid group name'\n        });\n      }\n\n      return;\n    } // if identify input is a proxied object created by the async loading snippet, convert it into an identify object\n\n\n    if (type(identify_obj) === 'object' && identify_obj.hasOwnProperty('_q')) {\n      identify_obj = _convertProxyObjectToRealObject(new Identify(), identify_obj);\n    }\n\n    if (identify_obj instanceof Identify) {\n      // only send if there are operations\n      if (Object.keys(identify_obj.userPropertiesOperations).length > 0) {\n        return this._logEvent(Constants.GROUP_IDENTIFY_EVENT, null, null, null, _defineProperty({}, group_type, group_name), identify_obj.userPropertiesOperations, null, opt_callback);\n      } else {\n        if (type(opt_callback) === 'function') {\n          opt_callback(0, 'No request sent', {\n            reason: 'No group property operations'\n          });\n        }\n      }\n    } else {\n      utils.log.error('Invalid identify input type. Expected Identify object but saw ' + type(identify_obj));\n\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'Invalid identify input type'\n        });\n      }\n    }\n  };\n  /**\n   * Set a versionName for your application.\n   * @public\n   * @param {string} versionName - The version to set for your application.\n   * @example amplitudeClient.setVersionName('1.12.3');\n   */\n\n\n  AmplitudeClient.prototype.setVersionName = function setVersionName(versionName) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['setVersionName'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!utils.validateInput(versionName, 'versionName', 'string')) {\n      return;\n    }\n\n    this.options.versionName = versionName;\n  };\n  /**\n   * Private logEvent method. Keeps apiProperties from being publicly exposed.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._logEvent = function _logEvent(eventType, eventProperties, apiProperties, userProperties, groups, groupProperties, timestamp, callback) {\n    {\n      _loadCookieData(this); // reload cookie before each log event to sync event meta-data between windows and tabs\n\n    }\n\n    if (!eventType) {\n      if (type(callback) === 'function') {\n        callback(0, 'No request sent', {\n          reason: 'Missing eventType'\n        });\n      }\n\n      return;\n    }\n\n    if (this.options.optOut) {\n      if (type(callback) === 'function') {\n        callback(0, 'No request sent', {\n          reason: 'optOut is set to true'\n        });\n      }\n\n      return;\n    }\n\n    try {\n      var eventId;\n\n      if (eventType === Constants.IDENTIFY_EVENT || eventType === Constants.GROUP_IDENTIFY_EVENT) {\n        eventId = this.nextIdentifyId();\n      } else {\n        eventId = this.nextEventId();\n      }\n\n      var sequenceNumber = this.nextSequenceNumber();\n      var eventTime = type(timestamp) === 'number' ? timestamp : new Date().getTime();\n\n      if (!this._sessionId || !this._lastEventTime || eventTime - this._lastEventTime > this.options.sessionTimeout) {\n        this._sessionId = eventTime;\n      }\n\n      this._lastEventTime = eventTime;\n\n      _saveCookieData(this);\n\n      var osName = this._ua.browser.name;\n      var osVersion = this._ua.browser.major;\n      var deviceModel = this._ua.os.name;\n      var deviceManufacturer;\n      var versionName;\n      var carrier;\n\n      userProperties = userProperties || {};\n\n      var trackingOptions = _objectSpread({}, this._apiPropertiesTrackingOptions);\n\n      apiProperties = _objectSpread({}, apiProperties || {}, trackingOptions);\n      eventProperties = eventProperties || {};\n      groups = groups || {};\n      groupProperties = groupProperties || {};\n      var event = {\n        device_id: this.options.deviceId,\n        user_id: this.options.userId,\n        timestamp: eventTime,\n        event_id: eventId,\n        session_id: this._sessionId || -1,\n        event_type: eventType,\n        version_name: _shouldTrackField(this, 'version_name') ? this.options.versionName || versionName || null : null,\n        platform: _shouldTrackField(this, 'platform') ? this.options.platform : null,\n        os_name: _shouldTrackField(this, 'os_name') ? osName || null : null,\n        os_version: _shouldTrackField(this, 'os_version') ? osVersion || null : null,\n        device_model: _shouldTrackField(this, 'device_model') ? deviceModel || null : null,\n        device_manufacturer: _shouldTrackField(this, 'device_manufacturer') ? deviceManufacturer || null : null,\n        language: _shouldTrackField(this, 'language') ? this.options.language : null,\n        carrier: _shouldTrackField(this, 'carrier') ? carrier || null : null,\n        api_properties: apiProperties,\n        event_properties: utils.truncate(utils.validateProperties(eventProperties)),\n        user_properties: utils.truncate(utils.validateProperties(userProperties)),\n        uuid: uuid(),\n        library: {\n          name: 'amplitude-js',\n          version: version\n        },\n        sequence_number: sequenceNumber,\n        // for ordering events and identifys\n        groups: utils.truncate(utils.validateGroups(groups)),\n        group_properties: utils.truncate(utils.validateProperties(groupProperties)),\n        user_agent: this._userAgent\n      };\n\n      if (eventType === Constants.IDENTIFY_EVENT || eventType === Constants.GROUP_IDENTIFY_EVENT) {\n        this._unsentIdentifys.push(event);\n\n        this._limitEventsQueued(this._unsentIdentifys);\n      } else {\n        this._unsentEvents.push(event);\n\n        this._limitEventsQueued(this._unsentEvents);\n      }\n\n      if (this.options.saveEvents) {\n        this.saveEvents();\n      }\n\n      if (!this._sendEventsIfReady(callback) && type(callback) === 'function') {\n        callback(0, 'No request sent', {\n          reason: 'No events to send or upload queued'\n        });\n      }\n\n      return eventId;\n    } catch (e) {\n      utils.log.error(e);\n    }\n  };\n\n  var _shouldTrackField = function _shouldTrackField(scope, field) {\n    return !!scope.options.trackingOptions[field];\n  };\n\n  var _generateApiPropertiesTrackingConfig = function _generateApiPropertiesTrackingConfig(scope) {\n    // to limit size of config payload, only send fields that have been disabled\n    var fields = ['city', 'country', 'dma', 'ip_address', 'region'];\n    var config = {};\n\n    for (var i = 0; i < fields.length; i++) {\n      var field = fields[i];\n\n      if (!_shouldTrackField(scope, field)) {\n        config[field] = false;\n      }\n    }\n\n    return config;\n  };\n  /**\n   * Remove old events from the beginning of the array if too many have accumulated. Default limit is 1000 events.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._limitEventsQueued = function _limitEventsQueued(queue) {\n    if (queue.length > this.options.savedMaxCount) {\n      queue.splice(0, queue.length - this.options.savedMaxCount);\n    }\n  };\n  /**\n   * This is the callback for logEvent and identify calls. It gets called after the event/identify is uploaded,\n   * and the server response code and response body from the upload request are passed to the callback function.\n   * @callback Amplitude~eventCallback\n   * @param {number} responseCode - Server response code for the event / identify upload request.\n   * @param {string} responseBody - Server response body for the event / identify upload request.\n   */\n\n  /**\n   * Log an event with eventType and eventProperties\n   * @public\n   * @param {string} eventType - name of event\n   * @param {object} eventProperties - (optional) an object with string keys and values for the event properties.\n   * @param {Amplitude~eventCallback} opt_callback - (optional) a callback function to run after the event is logged.\n   * Note: the server response code and response body from the event upload are passed to the callback function.\n   * @example amplitudeClient.logEvent('Clicked Homepage Button', {'finished_flow': false, 'clicks': 15});\n   */\n\n\n  AmplitudeClient.prototype.logEvent = function logEvent(eventType, eventProperties, opt_callback) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['logEvent'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    return this.logEventWithTimestamp(eventType, eventProperties, null, opt_callback);\n  };\n  /**\n   * Log an event with eventType and eventProperties and a custom timestamp\n   * @public\n   * @param {string} eventType - name of event\n   * @param {object} eventProperties - (optional) an object with string keys and values for the event properties.\n   * @param {number} timestamp - (optional) the custom timestamp as milliseconds since epoch.\n   * @param {Amplitude~eventCallback} opt_callback - (optional) a callback function to run after the event is logged.\n   * Note: the server response code and response body from the event upload are passed to the callback function.\n   * @example amplitudeClient.logEvent('Clicked Homepage Button', {'finished_flow': false, 'clicks': 15});\n   */\n\n\n  AmplitudeClient.prototype.logEventWithTimestamp = function logEvent(eventType, eventProperties, timestamp, opt_callback) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['logEventWithTimestamp'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!this._apiKeySet('logEvent()')) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'API key not set'\n        });\n      }\n\n      return -1;\n    }\n\n    if (!utils.validateInput(eventType, 'eventType', 'string')) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'Invalid type for eventType'\n        });\n      }\n\n      return -1;\n    }\n\n    if (utils.isEmptyString(eventType)) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'Missing eventType'\n        });\n      }\n\n      return -1;\n    }\n\n    return this._logEvent(eventType, eventProperties, null, null, null, null, timestamp, opt_callback);\n  };\n  /**\n   * Log an event with eventType, eventProperties, and groups. Use this to set event-level groups.\n   * Note: the group(s) set only apply for the specific event type being logged and does not persist on the user\n   * (unless you explicitly set it with setGroup).\n   * See the [SDK Readme]{@link https://github.com/amplitude/Amplitude-Javascript#setting-groups} for more information\n   * about groups and Count by Distinct on the Amplitude platform.\n   * @public\n   * @param {string} eventType - name of event\n   * @param {object} eventProperties - (optional) an object with string keys and values for the event properties.\n   * @param {object} groups - (optional) an object with string groupType: groupName values for the event being logged.\n   * groupName can be a string or an array of strings.\n   * @param {Amplitude~eventCallback} opt_callback - (optional) a callback function to run after the event is logged.\n   * Note: the server response code and response body from the event upload are passed to the callback function.\n   * @example amplitudeClient.logEventWithGroups('Clicked Button', null, {'orgId': 24});\n   */\n\n\n  AmplitudeClient.prototype.logEventWithGroups = function (eventType, eventProperties, groups, opt_callback) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['logEventWithGroups'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!this._apiKeySet('logEventWithGroups()')) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'API key not set'\n        });\n      }\n\n      return -1;\n    }\n\n    if (!utils.validateInput(eventType, 'eventType', 'string')) {\n      if (type(opt_callback) === 'function') {\n        opt_callback(0, 'No request sent', {\n          reason: 'Invalid type for eventType'\n        });\n      }\n\n      return -1;\n    }\n\n    return this._logEvent(eventType, eventProperties, null, null, groups, null, null, opt_callback);\n  };\n  /**\n   * Test that n is a number or a numeric value.\n   * @private\n   */\n\n\n  var _isNumber = function _isNumber(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  };\n  /**\n   * Log revenue with Revenue interface. The new revenue interface allows for more revenue fields like\n   * revenueType and event properties.\n   * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#tracking-revenue}\n   * for more information on the Revenue interface and logging revenue.\n   * @public\n   * @param {Revenue} revenue_obj - the revenue object containing the revenue data being logged.\n   * @example var revenue = new amplitude.Revenue().setProductId('productIdentifier').setPrice(10.99);\n   * amplitude.logRevenueV2(revenue);\n   */\n\n\n  AmplitudeClient.prototype.logRevenueV2 = function logRevenueV2(revenue_obj) {\n    if (this._shouldDeferCall()) {\n      return this._q.push(['logRevenueV2'].concat(Array.prototype.slice.call(arguments, 0)));\n    }\n\n    if (!this._apiKeySet('logRevenueV2()')) {\n      return;\n    } // if revenue input is a proxied object created by the async loading snippet, convert it into an revenue object\n\n\n    if (type(revenue_obj) === 'object' && revenue_obj.hasOwnProperty('_q')) {\n      revenue_obj = _convertProxyObjectToRealObject(new Revenue(), revenue_obj);\n    }\n\n    if (revenue_obj instanceof Revenue) {\n      // only send if revenue is valid\n      if (revenue_obj && revenue_obj._isValidRevenue()) {\n        return this.logEvent(Constants.REVENUE_EVENT, revenue_obj._toJSONObject());\n      }\n    } else {\n      utils.log.error('Invalid revenue input type. Expected Revenue object but saw ' + type(revenue_obj));\n    }\n  };\n\n  {\n    /**\n     * Log revenue event with a price, quantity, and product identifier. DEPRECATED - use logRevenueV2\n     * @public\n     * @deprecated\n     * @param {number} price - price of revenue event\n     * @param {number} quantity - (optional) quantity of products in revenue event. If no quantity specified default to 1.\n     * @param {string} product - (optional) product identifier\n     * @example amplitudeClient.logRevenue(3.99, 1, 'product_1234');\n     */\n    AmplitudeClient.prototype.logRevenue = function logRevenue(price, quantity, product) {\n      if (this._shouldDeferCall()) {\n        return this._q.push(['logRevenue'].concat(Array.prototype.slice.call(arguments, 0)));\n      } // Test that the parameters are of the right type.\n\n\n      if (!this._apiKeySet('logRevenue()') || !_isNumber(price) || quantity !== undefined && !_isNumber(quantity)) {\n        // utils.log('Price and quantity arguments to logRevenue must be numbers');\n        return -1;\n      }\n\n      return this._logEvent(Constants.REVENUE_EVENT, {}, {\n        productId: product,\n        special: 'revenue_amount',\n        quantity: quantity || 1,\n        price: price\n      }, null, null, null, null, null);\n    };\n  }\n  /**\n   * Remove events in storage with event ids up to and including maxEventId.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype.removeEvents = function removeEvents(maxEventId, maxIdentifyId) {\n    _removeEvents(this, '_unsentEvents', maxEventId);\n\n    _removeEvents(this, '_unsentIdentifys', maxIdentifyId);\n  };\n  /**\n   * Helper function to remove events up to maxId from a single queue.\n   * Does a true filter in case events get out of order or old events are removed.\n   * @private\n   */\n\n\n  var _removeEvents = function _removeEvents(scope, eventQueue, maxId) {\n    if (maxId < 0) {\n      return;\n    }\n\n    var filteredEvents = [];\n\n    for (var i = 0; i < scope[eventQueue].length || 0; i++) {\n      if (scope[eventQueue][i].event_id > maxId) {\n        filteredEvents.push(scope[eventQueue][i]);\n      }\n    }\n\n    scope[eventQueue] = filteredEvents;\n  };\n  /**\n   * Send unsent events. Note: this is called automatically after events are logged if option batchEvents is false.\n   * If batchEvents is true, then events are only sent when batch criterias are met.\n   * @private\n   * @param {Amplitude~eventCallback} callback - (optional) callback to run after events are sent.\n   * Note the server response code and response body are passed to the callback as input arguments.\n   */\n\n\n  AmplitudeClient.prototype.sendEvents = function sendEvents(callback) {\n    if (!this._apiKeySet('sendEvents()')) {\n      if (type(callback) === 'function') {\n        callback(0, 'No request sent', {\n          reason: 'API key not set'\n        });\n      }\n\n      return;\n    }\n\n    if (this.options.optOut) {\n      if (type(callback) === 'function') {\n        callback(0, 'No request sent', {\n          reason: 'optOut is set to true'\n        });\n      }\n\n      return;\n    }\n\n    if (this._unsentCount() === 0) {\n      if (type(callback) === 'function') {\n        callback(0, 'No request sent', {\n          reason: 'No events to send'\n        });\n      }\n\n      return;\n    }\n\n    if (this._sending) {\n      if (type(callback) === 'function') {\n        callback(0, 'No request sent', {\n          reason: 'Request already in progress. Events will be sent once this request is complete'\n        });\n      }\n\n      return;\n    }\n\n    this._sending = true;\n    var protocol = this.options.forceHttps ? 'https' : 'https:' === window.location.protocol ? 'https' : 'http';\n    var url = protocol + '://' + this.options.apiEndpoint; // fetch events to send\n\n    var numEvents = Math.min(this._unsentCount(), this.options.uploadBatchSize);\n\n    var mergedEvents = this._mergeEventsAndIdentifys(numEvents);\n\n    var maxEventId = mergedEvents.maxEventId;\n    var maxIdentifyId = mergedEvents.maxIdentifyId;\n    var events = JSON.stringify(mergedEvents.eventsToSend);\n    var uploadTime = new Date().getTime();\n    var data = {\n      client: this.options.apiKey,\n      e: events,\n      v: Constants.API_VERSION,\n      upload_time: uploadTime,\n      checksum: md5(Constants.API_VERSION + this.options.apiKey + events + uploadTime)\n    };\n    var scope = this;\n    new Request(url, data).send(function (status, response) {\n      scope._sending = false;\n\n      try {\n        if (status === 200 && response === 'success') {\n          scope.removeEvents(maxEventId, maxIdentifyId); // Update the event cache after the removal of sent events.\n\n          if (scope.options.saveEvents) {\n            scope.saveEvents();\n          } // Send more events if any queued during previous send.\n\n\n          if (!scope._sendEventsIfReady(callback) && type(callback) === 'function') {\n            callback(status, response);\n          } // handle payload too large\n\n        } else if (status === 413) {\n          // utils.log('request too large');\n          // Can't even get this one massive event through. Drop it, even if it is an identify.\n          if (scope.options.uploadBatchSize === 1) {\n            scope.removeEvents(maxEventId, maxIdentifyId);\n          } // The server complained about the length of the request. Backoff and try again.\n\n\n          scope.options.uploadBatchSize = Math.ceil(numEvents / 2);\n          scope.sendEvents(callback);\n        } else if (type(callback) === 'function') {\n          // If server turns something like a 400\n          callback(status, response);\n        }\n      } catch (e) {// utils.log('failed upload');\n      }\n    });\n  };\n  /**\n   * Merge unsent events and identifys together in sequential order based on their sequence number, for uploading.\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._mergeEventsAndIdentifys = function _mergeEventsAndIdentifys(numEvents) {\n    // coalesce events from both queues\n    var eventsToSend = [];\n    var eventIndex = 0;\n    var maxEventId = -1;\n    var identifyIndex = 0;\n    var maxIdentifyId = -1;\n\n    while (eventsToSend.length < numEvents) {\n      var event;\n      var noIdentifys = identifyIndex >= this._unsentIdentifys.length;\n      var noEvents = eventIndex >= this._unsentEvents.length; // case 0: no events or identifys left\n      // note this should not happen, this means we have less events and identifys than expected\n\n      if (noEvents && noIdentifys) {\n        utils.log.error('Merging Events and Identifys, less events and identifys than expected');\n        break;\n      } // case 1: no identifys - grab from events\n      else if (noIdentifys) {\n          event = this._unsentEvents[eventIndex++];\n          maxEventId = event.event_id; // case 2: no events - grab from identifys\n        } else if (noEvents) {\n          event = this._unsentIdentifys[identifyIndex++];\n          maxIdentifyId = event.event_id; // case 3: need to compare sequence numbers\n        } else {\n          // events logged before v2.5.0 won't have a sequence number, put those first\n          if (!('sequence_number' in this._unsentEvents[eventIndex]) || this._unsentEvents[eventIndex].sequence_number < this._unsentIdentifys[identifyIndex].sequence_number) {\n            event = this._unsentEvents[eventIndex++];\n            maxEventId = event.event_id;\n          } else {\n            event = this._unsentIdentifys[identifyIndex++];\n            maxIdentifyId = event.event_id;\n          }\n        }\n\n      eventsToSend.push(event);\n    }\n\n    return {\n      eventsToSend: eventsToSend,\n      maxEventId: maxEventId,\n      maxIdentifyId: maxIdentifyId\n    };\n  };\n\n  {\n    /**\n     * Set global user properties. Note this is deprecated, and we recommend using setUserProperties\n     * @public\n     * @deprecated\n     */\n    AmplitudeClient.prototype.setGlobalUserProperties = function setGlobalUserProperties(userProperties) {\n      this.setUserProperties(userProperties);\n    };\n  }\n  /**\n   * Get the current version of Amplitude's Javascript SDK.\n   * @public\n   * @returns {number} version number\n   * @example var amplitudeVersion = amplitude.__VERSION__;\n   */\n\n\n  AmplitudeClient.prototype.__VERSION__ = version;\n  /**\n   * Determines whether or not to push call to this._q or invoke it\n   * @private\n   */\n\n  AmplitudeClient.prototype._shouldDeferCall = function _shouldDeferCall() {\n    return this._pendingReadStorage || this._initializationDeferred;\n  };\n  /**\n   * Defers Initialization by putting all functions into storage until users\n   * have accepted terms for tracking\n   * @private\n   */\n\n\n  AmplitudeClient.prototype._deferInitialization = function _deferInitialization() {\n    this._initializationDeferred = true;\n\n    this._q.push(['init'].concat(Array.prototype.slice.call(arguments, 0)));\n  };\n  /**\n   * Enable tracking via logging events and dropping a cookie\n   * Intended to be used with the deferInitialization configuration flag\n   * This will drop a cookie and reset initialization deferred\n   * @public\n   */\n\n\n  AmplitudeClient.prototype.enableTracking = function enableTracking() {\n    // This will call init (which drops the cookie) and will run any pending tasks\n    this._initializationDeferred = false;\n\n    _saveCookieData(this);\n\n    this.runQueuedFunctions();\n  };\n\n  /**\n   * Amplitude SDK API - instance manager.\n   * Function calls directly on amplitude have been deprecated. Please call methods on the default shared instance: amplitude.getInstance() instead.\n   * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#300-update-and-logging-events-to-multiple-amplitude-apps} for more information about this change.\n   * @constructor Amplitude\n   * @public\n   * @example var amplitude = new Amplitude();\n   */\n\n  var Amplitude = function Amplitude() {\n    this.options = _objectSpread({}, DEFAULT_OPTIONS);\n    this._q = [];\n    this._instances = {}; // mapping of instance names to instances\n  };\n\n  Amplitude.prototype.Identify = Identify;\n  Amplitude.prototype.Revenue = Revenue;\n\n  Amplitude.prototype.getInstance = function getInstance(instance) {\n    instance = utils.isEmptyString(instance) ? Constants.DEFAULT_INSTANCE : instance.toLowerCase();\n    var client = this._instances[instance];\n\n    if (client === undefined) {\n      client = new AmplitudeClient(instance);\n      this._instances[instance] = client;\n    }\n\n    return client;\n  };\n\n  {\n    /**\n     * Run functions queued up by proxy loading snippet\n     * @private\n     */\n    Amplitude.prototype.runQueuedFunctions = function () {\n      // run queued up old versions of functions\n      for (var i = 0; i < this._q.length; i++) {\n        var fn = this[this._q[i][0]];\n\n        if (type(fn) === 'function') {\n          fn.apply(this, this._q[i].slice(1));\n        }\n      }\n\n      this._q = []; // clear function queue after running\n      // run queued up functions on instances\n\n      for (var instance in this._instances) {\n        if (this._instances.hasOwnProperty(instance)) {\n          this._instances[instance].runQueuedFunctions();\n        }\n      }\n    };\n  }\n\n  {\n    /**\n     * Initializes the Amplitude Javascript SDK with your apiKey and any optional configurations.\n     * This is required before any other methods can be called.\n     * @public\n     * @param {string} apiKey - The API key for your app.\n     * @param {string} opt_userId - (optional) An identifier for this user.\n     * @param {object} opt_config - (optional) Configuration options.\n     * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#configuration-options} for list of options and default values.\n     * @param {function} opt_callback - (optional) Provide a callback function to run after initialization is complete.\n     * @deprecated Please use amplitude.getInstance().init(apiKey, opt_userId, opt_config, opt_callback);\n     * @example amplitude.init('API_KEY', 'USER_ID', {includeReferrer: true, includeUtm: true}, function() { alert('init complete'); });\n     */\n    Amplitude.prototype.init = function init(apiKey, opt_userId, opt_config, opt_callback) {\n      this.getInstance().init(apiKey, opt_userId, opt_config, function (instance) {\n        // make options such as deviceId available for callback functions\n        this.options = instance.options;\n\n        if (type(opt_callback) === 'function') {\n          opt_callback(instance);\n        }\n      }.bind(this));\n    };\n    /**\n     * Returns true if a new session was created during initialization, otherwise false.\n     * @public\n     * @return {boolean} Whether a new session was created during initialization.\n     * @deprecated Please use amplitude.getInstance().isNewSession();\n     */\n\n\n    Amplitude.prototype.isNewSession = function isNewSession() {\n      return this.getInstance().isNewSession();\n    };\n    /**\n     * Returns the id of the current session.\n     * @public\n     * @return {number} Id of the current session.\n     * @deprecated Please use amplitude.getInstance().getSessionId();\n     */\n\n\n    Amplitude.prototype.getSessionId = function getSessionId() {\n      return this.getInstance().getSessionId();\n    };\n    /**\n     * Increments the eventId and returns it.\n     * @private\n     */\n\n\n    Amplitude.prototype.nextEventId = function nextEventId() {\n      return this.getInstance().nextEventId();\n    };\n    /**\n     * Increments the identifyId and returns it.\n     * @private\n     */\n\n\n    Amplitude.prototype.nextIdentifyId = function nextIdentifyId() {\n      return this.getInstance().nextIdentifyId();\n    };\n    /**\n     * Increments the sequenceNumber and returns it.\n     * @private\n     */\n\n\n    Amplitude.prototype.nextSequenceNumber = function nextSequenceNumber() {\n      return this.getInstance().nextSequenceNumber();\n    };\n    /**\n     * Saves unsent events and identifies to localStorage. JSON stringifies event queues before saving.\n     * Note: this is called automatically every time events are logged, unless you explicitly set option saveEvents to false.\n     * @private\n     */\n\n\n    Amplitude.prototype.saveEvents = function saveEvents() {\n      this.getInstance().saveEvents();\n    };\n    /**\n     * Sets a customer domain for the amplitude cookie. Useful if you want to support cross-subdomain tracking.\n     * @public\n     * @param {string} domain to set.\n     * @deprecated Please use amplitude.getInstance().setDomain(domain);\n     * @example amplitude.setDomain('.amplitude.com');\n     */\n\n\n    Amplitude.prototype.setDomain = function setDomain(domain) {\n      this.getInstance().setDomain(domain);\n    };\n    /**\n     * Sets an identifier for the current user.\n     * @public\n     * @param {string} userId - identifier to set. Can be null.\n     * @deprecated Please use amplitude.getInstance().setUserId(userId);\n     * @example amplitude.setUserId('joe@gmail.com');\n     */\n\n\n    Amplitude.prototype.setUserId = function setUserId(userId) {\n      this.getInstance().setUserId(userId);\n    };\n    /**\n     * Add user to a group or groups. You need to specify a groupType and groupName(s).\n     * For example you can group people by their organization.\n     * In that case groupType is \"orgId\" and groupName would be the actual ID(s).\n     * groupName can be a string or an array of strings to indicate a user in multiple gruups.\n     * You can also call setGroup multiple times with different groupTypes to track multiple types of groups (up to 5 per app).\n     * Note: this will also set groupType: groupName as a user property.\n     * See the [SDK Readme]{@link https://github.com/amplitude/Amplitude-Javascript#setting-groups} for more information.\n     * @public\n     * @param {string} groupType - the group type (ex: orgId)\n     * @param {string|list} groupName - the name of the group (ex: 15), or a list of names of the groups\n     * @deprecated Please use amplitude.getInstance().setGroup(groupType, groupName);\n     * @example amplitude.setGroup('orgId', 15); // this adds the current user to orgId 15.\n     */\n\n\n    Amplitude.prototype.setGroup = function (groupType, groupName) {\n      this.getInstance().setGroup(groupType, groupName);\n    };\n    /**\n     * Sets whether to opt current user out of tracking.\n     * @public\n     * @param {boolean} enable - if true then no events will be logged or sent.\n     * @deprecated Please use amplitude.getInstance().setOptOut(enable);\n     * @example: amplitude.setOptOut(true);\n     */\n\n\n    Amplitude.prototype.setOptOut = function setOptOut(enable) {\n      this.getInstance().setOptOut(enable);\n    };\n    /**\n      * Regenerates a new random deviceId for current user. Note: this is not recommended unless you know what you\n      * are doing. This can be used in conjunction with `setUserId(null)` to anonymize users after they log out.\n      * With a null userId and a completely new deviceId, the current user would appear as a brand new user in dashboard.\n      * This uses src/uuid.js to regenerate the deviceId.\n      * @public\n      * @deprecated Please use amplitude.getInstance().regenerateDeviceId();\n      */\n\n\n    Amplitude.prototype.regenerateDeviceId = function regenerateDeviceId() {\n      this.getInstance().regenerateDeviceId();\n    };\n    /**\n      * Sets a custom deviceId for current user. Note: this is not recommended unless you know what you are doing\n      * (like if you have your own system for managing deviceIds). Make sure the deviceId you set is sufficiently unique\n      * (we recommend something like a UUID - see src/uuid.js for an example of how to generate) to prevent conflicts with other devices in our system.\n      * @public\n      * @param {string} deviceId - custom deviceId for current user.\n      * @deprecated Please use amplitude.getInstance().setDeviceId(deviceId);\n      * @example amplitude.setDeviceId('45f0954f-eb79-4463-ac8a-233a6f45a8f0');\n      */\n\n\n    Amplitude.prototype.setDeviceId = function setDeviceId(deviceId) {\n      this.getInstance().setDeviceId(deviceId);\n    };\n    /**\n     * Sets user properties for the current user.\n     * @public\n     * @param {object} - object with string keys and values for the user properties to set.\n     * @param {boolean} - DEPRECATED opt_replace: in earlier versions of the JS SDK the user properties object was kept in\n     * memory and replace = true would replace the object in memory. Now the properties are no longer stored in memory, so replace is deprecated.\n     * @deprecated Please use amplitude.getInstance.setUserProperties(userProperties);\n     * @example amplitude.setUserProperties({'gender': 'female', 'sign_up_complete': true})\n     */\n\n\n    Amplitude.prototype.setUserProperties = function setUserProperties(userProperties) {\n      this.getInstance().setUserProperties(userProperties);\n    };\n    /**\n     * Clear all of the user properties for the current user. Note: clearing user properties is irreversible!\n     * @public\n     * @deprecated Please use amplitude.getInstance().clearUserProperties();\n     * @example amplitude.clearUserProperties();\n     */\n\n\n    Amplitude.prototype.clearUserProperties = function clearUserProperties() {\n      this.getInstance().clearUserProperties();\n    };\n    /**\n     * Send an identify call containing user property operations to Amplitude servers.\n     * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#user-properties-and-user-property-operations}\n     * for more information on the Identify API and user property operations.\n     * @param {Identify} identify_obj - the Identify object containing the user property operations to send.\n     * @param {Amplitude~eventCallback} opt_callback - (optional) callback function to run when the identify event has been sent.\n     * Note: the server response code and response body from the identify event upload are passed to the callback function.\n     * @deprecated Please use amplitude.getInstance().identify(identify);\n     * @example\n     * var identify = new amplitude.Identify().set('colors', ['rose', 'gold']).add('karma', 1).setOnce('sign_up_date', '2016-03-31');\n     * amplitude.identify(identify);\n     */\n\n\n    Amplitude.prototype.identify = function (identify_obj, opt_callback) {\n      this.getInstance().identify(identify_obj, opt_callback);\n    };\n    /**\n     * Set a versionName for your application.\n     * @public\n     * @param {string} versionName - The version to set for your application.\n     * @deprecated Please use amplitude.getInstance().setVersionName(versionName);\n     * @example amplitude.setVersionName('1.12.3');\n     */\n\n\n    Amplitude.prototype.setVersionName = function setVersionName(versionName) {\n      this.getInstance().setVersionName(versionName);\n    };\n    /**\n     * This is the callback for logEvent and identify calls. It gets called after the event/identify is uploaded,\n     * and the server response code and response body from the upload request are passed to the callback function.\n     * @callback Amplitude~eventCallback\n     * @param {number} responseCode - Server response code for the event / identify upload request.\n     * @param {string} responseBody - Server response body for the event / identify upload request.\n     */\n\n    /**\n     * Log an event with eventType and eventProperties\n     * @public\n     * @param {string} eventType - name of event\n     * @param {object} eventProperties - (optional) an object with string keys and values for the event properties.\n     * @param {Amplitude~eventCallback} opt_callback - (optional) a callback function to run after the event is logged.\n     * Note: the server response code and response body from the event upload are passed to the callback function.\n     * @deprecated Please use amplitude.getInstance().logEvent(eventType, eventProperties, opt_callback);\n     * @example amplitude.logEvent('Clicked Homepage Button', {'finished_flow': false, 'clicks': 15});\n     */\n\n\n    Amplitude.prototype.logEvent = function logEvent(eventType, eventProperties, opt_callback) {\n      return this.getInstance().logEvent(eventType, eventProperties, opt_callback);\n    };\n    /**\n     * Log an event with eventType, eventProperties, and groups. Use this to set event-level groups.\n     * Note: the group(s) set only apply for the specific event type being logged and does not persist on the user\n     * (unless you explicitly set it with setGroup).\n     * See the [SDK Readme]{@link https://github.com/amplitude/Amplitude-Javascript#setting-groups} for more information\n     * about groups and Count by Distinct on the Amplitude platform.\n     * @public\n     * @param {string} eventType - name of event\n     * @param {object} eventProperties - (optional) an object with string keys and values for the event properties.\n     * @param {object} groups - (optional) an object with string groupType: groupName values for the event being logged.\n     * groupName can be a string or an array of strings.\n     * @param {Amplitude~eventCallback} opt_callback - (optional) a callback function to run after the event is logged.\n     * Note: the server response code and response body from the event upload are passed to the callback function.\n     * Deprecated Please use amplitude.getInstance().logEventWithGroups(eventType, eventProperties, groups, opt_callback);\n     * @example amplitude.logEventWithGroups('Clicked Button', null, {'orgId': 24});\n     */\n\n\n    Amplitude.prototype.logEventWithGroups = function (eventType, eventProperties, groups, opt_callback) {\n      return this.getInstance().logEventWithGroups(eventType, eventProperties, groups, opt_callback);\n    };\n    /**\n     * Log revenue with Revenue interface. The new revenue interface allows for more revenue fields like\n     * revenueType and event properties.\n     * See [Readme]{@link https://github.com/amplitude/Amplitude-Javascript#tracking-revenue}\n     * for more information on the Revenue interface and logging revenue.\n     * @public\n     * @param {Revenue} revenue_obj - the revenue object containing the revenue data being logged.\n     * @deprecated Please use amplitude.getInstance().logRevenueV2(revenue_obj);\n     * @example var revenue = new amplitude.Revenue().setProductId('productIdentifier').setPrice(10.99);\n     * amplitude.logRevenueV2(revenue);\n     */\n\n\n    Amplitude.prototype.logRevenueV2 = function logRevenueV2(revenue_obj) {\n      return this.getInstance().logRevenueV2(revenue_obj);\n    };\n    /**\n     * Log revenue event with a price, quantity, and product identifier. DEPRECATED - use logRevenueV2\n     * @public\n     * @param {number} price - price of revenue event\n     * @param {number} quantity - (optional) quantity of products in revenue event. If no quantity specified default to 1.\n     * @param {string} product - (optional) product identifier\n     * @deprecated Please use amplitude.getInstance().logRevenueV2(revenue_obj);\n     * @example amplitude.logRevenue(3.99, 1, 'product_1234');\n     */\n\n\n    Amplitude.prototype.logRevenue = function logRevenue(price, quantity, product) {\n      return this.getInstance().logRevenue(price, quantity, product);\n    };\n    /**\n     * Remove events in storage with event ids up to and including maxEventId.\n     * @private\n     */\n\n\n    Amplitude.prototype.removeEvents = function removeEvents(maxEventId, maxIdentifyId) {\n      this.getInstance().removeEvents(maxEventId, maxIdentifyId);\n    };\n    /**\n     * Send unsent events. Note: this is called automatically after events are logged if option batchEvents is false.\n     * If batchEvents is true, then events are only sent when batch criterias are met.\n     * @private\n     * @param {Amplitude~eventCallback} callback - (optional) callback to run after events are sent.\n     * Note the server response code and response body are passed to the callback as input arguments.\n     */\n\n\n    Amplitude.prototype.sendEvents = function sendEvents(callback) {\n      this.getInstance().sendEvents(callback);\n    };\n    /**\n     * Set global user properties. Note this is deprecated, and we recommend using setUserProperties\n     * @public\n     * @deprecated\n     */\n\n\n    Amplitude.prototype.setGlobalUserProperties = function setGlobalUserProperties(userProperties) {\n      this.getInstance().setUserProperties(userProperties);\n    };\n  }\n  /**\n   * Get the current version of Amplitude's Javascript SDK.\n   * @public\n   * @returns {number} version number\n   * @example var amplitudeVersion = amplitude.__VERSION__;\n   */\n\n\n  Amplitude.prototype.__VERSION__ = version;\n\n  /* jshint expr:true */\n  var old = window.amplitude || {};\n  var newInstance = new Amplitude();\n  newInstance._q = old._q || [];\n\n  for (var instance in old._iq) {\n    // migrate each instance's queue\n    if (old._iq.hasOwnProperty(instance)) {\n      newInstance.getInstance(instance)._q = old._iq[instance]._q || [];\n    }\n  }\n\n  {\n    newInstance.runQueuedFunctions();\n  } // export the instance\n\n  return newInstance;\n\n}));\n","export const changeDisplay = (elem, isShown) => isShown\n  ? elem.classList.remove('hide')\n  : elem.classList.add('hide')\n\nexport const setView = ({ is_loading, logged_in, user = {}, creds } = {}) => {\n  const login_form = document.forms.instalogin\n\n  if (logged_in) {\n    document.querySelectorAll('.logged_in').forEach(elem => changeDisplay(elem, true))\n    document.querySelectorAll('.not_logged_in').forEach(elem => changeDisplay(elem, false))\n  } else {\n    document.querySelectorAll('.logged_in').forEach(elem => changeDisplay(elem, false))\n    document.querySelectorAll('.not_logged_in').forEach(elem => changeDisplay(elem, true))\n  }\n\n  if (user) {\n    document.querySelector('.username-field').innerText = user.username\n  }\n\n  console.log('creds', creds)\n  if (creds !== undefined && creds !== {} && creds !== null) {\n    login_form.elements.username.value = creds.username\n    login_form.elements.password.value = creds.password\n  }\n\n  console.log('is loading', is_loading)\n  if (is_loading) {\n    document.querySelectorAll('.loading').forEach(elem => changeDisplay(elem, true))\n  } else {\n    document.querySelectorAll('.loading').forEach(elem => changeDisplay(elem, false))\n  }\n}\n","import instagram from './instagram_connector'\nimport {\n  getCredentials,\n  saveCredentials,\n  clearCredentials,\n} from '../shared/credentials'\nimport { logEvent } from '../shared/amplitude'\nimport { setView } from './view'\n\nconst whenLogged = async () => {\n  const { user } = await instagram.request({\n    method: 'get_user_info',\n    params: ['instagram'],\n  })\n\n  console.log('@instagram', user.pk, user)\n\n  // const follow = await instagram.callMethod('follow', user.pk)\n\n  // console.log('follow request', follow)\n\n  await updateView()\n}\n\nconst openControlPanel = () => {\n  const WEBSITE_URL = 'https://dashboard.gramup.me/'\n  window.open(WEBSITE_URL)\n}\n\nconst checkLogin = async () => {\n  const { user } = await instagram.request({\n    method: 'check_login',\n  })\n\n  console.log('update view, user =', user)\n\n  const logged_in = !!user.pk\n\n  return { logged_in, user }\n}\n\nconst updateView = async () => {\n  const creds = await getCredentials()\n\n  try {\n    const { logged_in, user } = await checkLogin()\n\n    setView({\n      logged_in,\n      user,\n      creds,\n    })\n  } catch (err) {\n    setView({\n      logged_in: false,\n      user: null,\n      creds,\n    })\n  }\n}\n\nconst onLoginSuccess = async (res, creds) => {\n  openControlPanel()\n  await whenLogged()\n\n  logEvent('Login Success', { isCookie: !creds })\n\n  if (creds) {\n    const { username, password } = creds\n    await saveCredentials(username, password)\n  }\n}\n\nconst onLoginError = async (reason) => {\n  logEvent('Login Error', { reason })\n\n  alert(reason)\n  console.error('LoginError:', reason)\n}\n\nwindow.onload = async () => {\n  logEvent('App Loaded')\n\n  const login_form = document.forms.instalogin\n\n  if (!login_form) return\n\n  // try {\n  //   setView({ is_loading: true })\n\n  //   const res = await instagram.request({\n  //     method: 'login_via_cookie',\n  //   })\n\n  //   onLoginSuccess(res)\n  // } catch (err) {\n  //   console.log('Login Error', err)\n  //   onLoginError(err.message)\n  //   const { error: { response } } = err\n  //   console.error(response)\n  // } finally {\n  //   setView({ is_loading: false })\n  // }\n\n  document.querySelector('#exit').onclick = async () => {\n    await clearCredentials()\n\n    logEvent('Logout')\n\n    await instagram.request({\n      method: 'exit',\n    })\n\n    await updateView()\n  }\n\n  document.querySelector('.btn-get-cookies').onclick = async (event) => {\n    event.preventDefault()\n\n    try {\n      setView({ is_loading: true })\n\n      const res = await instagram.request({\n        method: 'login_via_cookie',\n      })\n\n      onLoginSuccess(res)\n    } catch (err) {\n      console.log('Login Error', err)\n      onLoginError(err.message)\n      const { error: { response } } = err\n      console.error(response)\n    } finally {\n      setView({ is_loading: false })\n    }\n  }\n\n  login_form.onsubmit = async (event) => {\n    event.preventDefault()\n\n    const { username, password } = document.forms.instalogin.elements\n    const creds = { username: username.value, password: password.value }\n\n    try {\n      setView({ is_loading: true })\n\n      const res = await instagram.request({\n        method: 'login',\n        params: [username.value, password.value],\n      })\n\n      onLoginSuccess(res, creds)\n    } catch (err) {\n      console.error(err)\n\n      const { message, response } = err || {}\n\n      console.error(response)\n\n      if (response.two_factor_required) {\n        const two_factor_data = response\n        const two_factor_code = prompt('Input a code for two-factor auth from SMS')\n\n        if (!two_factor_code) {\n          return onLoginError('No code')\n        }\n\n        const res = await instagram.request({\n          method: 'login_2fa',\n          params: [username.value, password.value, two_factor_code, two_factor_data],\n        })\n\n        if (res.status === 'ok') {\n          onLoginSuccess(res, creds)\n        } else {\n          onLoginError(res.error.message)\n        }\n      } else if (response.challenge) {\n        onLoginError(response.message)\n        window.open(response.challenge.url)\n      } else if (response) {\n        onLoginError(response.message)\n      } else {\n        onLoginError(message)\n      }\n\n      // if (err.message.includes(`status code 400`)) {\n      //   alert(`InstagramError: Probably wrong password:` + err.message)\n      // } else if (err.message.includes(`status code 400`)) {\n      //   alert(`InstagramError: Probably wrong password:` + err.message)\n      // } else {\n      //   alert(err.message)\n      // }\n    } finally {\n      setView({ is_loading: false })\n    }\n  }\n\n  // INIT\n  setView({ is_loading: true })\n\n  setTimeout(async () => {\n    await updateView()\n  }, 1000)\n}\n"],"names":["InstagramError","Error","[object Object]","status","error","super","this","message","response","TimeoutError","instagram","isStopped","isConnected","init","async","ping","request","method","console","log","Boolean","pong","err","start","kill","data","Promise","resolve","reject","req_id","Date","now","handler","sender","chrome","runtime","onMessage","removeListener","setTimeout","addListener","sendMessage","window","saveCredentials","username","password","storage","local","set","credentials","getCredentials","get","result","clearCredentials","global","self","lookup","revLookup","Arr","Uint8Array","Array","inited","code","i","len","length","charCodeAt","encodeChunk","uint8","end","tmp","num","output","push","join","fromByteArray","extraBytes","parts","len2","read","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","d","s","NaN","Infinity","Math","pow","write","value","c","rt","abs","isNaN","floor","LN2","toString","isArray","arr","call","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","prototype","arg","encodingOrOffset","allocUnsafe","from","TypeError","ArrayBuffer","array","byteOffset","byteLength","undefined","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","slice","fromString","obj","internalIsBuffer","checked","copy","val","type","fromObject","assertSize","size","b","_isBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","dir","arrayIndexOf","indexOf","lastIndexOf","indexSize","arrLength","valLength","String","buf","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","apply","decodeCodePointsArray","poolSize","_augment","alloc","fill","allocUnsafeSlow","isBuffer","isFastBuffer","readFloatLE","isSlowBuffer","compare","a","x","y","concat","list","pos","swap16","swap32","swap64","arguments","equals","inspect","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","max","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","subarray","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","b64","l","placeHolders","L","toByteArray","trim","replace","stringtrim","base64clean","src","dst","constructor","instance","module","_typeof","Symbol","iterator","_defineProperty","key","Object","defineProperty","enumerable","configurable","writable","_objectSpread","source","ownKeys","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","forEach","Constants","UTF8","utftext","c1","c2","Base64","_keyStr","encode","input","btoa","atob","unescape","encodeURIComponent","_encode","chr1","chr2","chr3","enc1","enc2","enc3","enc4","charAt","decode","decodeURIComponent","escape","_decode","nodeType","valueOf","localStorage","logLevels","DISABLE","ERROR","WARN","INFO","logLevel","_log","warn","info","_truncateValue","substring","validateProperties","properties","propsType","property","hasOwnProperty","keyType","validatePropertyValue","invalidValueTypes","valueType","arrayCopy","element","elemType","validateGroupName","groupName","groupNameType","utils","logLevelName","name","query","results","RegExp","exec","truncate","groups","groupsType","group","expectedType","getLocation","location","baseCookie","opts","expires","expirationDays","date","setTime","getTime","toUTCString","domain","secure","document","cookie","ca","split","_options","topDomain","url","createElement","href","hostname","getHost","last","levels","_i","cname","_domainSpecific","suffix","get$1","nameEq","JSON","parse","set$1","stringify","remove","Cookie","reset","options","token","random","stored","uid","setItem","getItem","removeItem","windowLocalStorageAvailable","globalStorage","div","attrKey","style","display","getElementsByTagName","appendChild","addBehavior","k","v","load","getAttribute","setAttribute","save","removeAttribute","clear","attr","XMLDocument","documentElement","attributes","localStorage$1","cookieStorage","_cookiesEnabled","getStorage","Identify","userPropertiesOperations","add","_addOperation","append","clearAll","prepend","setOnce","unset","operation","commonjsGlobal","createCommonjsModule","fn","exports","md5","$","safeAdd","lsw","md5cmn","q","t","cnt","md5ff","md5gg","md5hh","md5ii","binlMD5","olda","oldb","oldc","oldd","binl2rstr","length32","rstr2binl","length8","rstr2hex","str2rstrUTF8","rawMD5","rstrMD5","rawHMACMD5","hash","bkey","ipad","opad","rstrHMACMD5","raw","propIsEnumerable","propertyIsEnumerable","toObject","objectAssign","assign","test1","getOwnPropertyNames","test2","map","test3","letter","shouldUseNative","symbols","to","strict","toUpperCase","queryString","arrayFormat","sort","formatter","index","encoderForArrayFormat","val2","Request","send","callback","XDomainRequest","xdr","open","onload","responseText","onerror","ontimeout","onprogress","xhr","XMLHttpRequest","onreadystatechange","readyState","setRequestHeader","Revenue","_price","_productId","_quantity","_revenueType","_properties","setProductId","productId","setQuantity","quantity","setPrice","price","setRevenueType","revenueType","setEventProperties","eventProperties","_isValidRevenue","_toJSONObject","uaParser","undefined$1","MODEL","NAME","TYPE","VENDOR","VERSION","MOBILE","TABLET","util","extend","regexes","extensions","margedRegexes","has","str1","str2","lowerize","major","version","mapper","rgx","ua","arrays","p","matches","regex","props","test","maps","browser","oldsafari","1.0","1.2","1.3","2.0","2.0.2","2.0.3","2.0.4","?","Opera Mobile","IE Mobile","device","amazon","model","Fire Phone","sprint","Evo Shift 4G","vendor","HTC","Sprint","os","windows","ME","NT 3.11","NT 4.0","2000","XP","Vista","7","8","8.1","10","RT","Windows Phone","cpu","engine","UAParser","uastring","getResult","navigator","userAgent","rgxmap","getBrowser","getCPU","architecture","getDevice","getEngine","getOS","getUA","setUA","BROWSER","MAJOR","CPU","ARCHITECTURE","DEVICE","CONSOLE","SMARTTV","WEARABLE","EMBEDDED","ENGINE","OS","jQuery","Zepto","parser","prop","uuid","DEFAULT_OPTIONS","apiEndpoint","batchEvents","cookieExpiration","cookieName","deviceIdFromUrlParam","eventUploadPeriodMillis","eventUploadThreshold","forceHttps","includeGclid","includeReferrer","includeUtm","language","languages","userLanguage","optOut","onError","platform","savedMaxCount","saveEvents","saveParamsReferrerOncePerSession","secureCookie","sessionTimeout","trackingOptions","city","country","carrier","device_manufacturer","device_model","dma","ip_address","os_name","os_version","region","version_name","unsetParamsReferrerOnNewSession","unsentKey","unsentIdentifyKey","uploadBatchSize","AmplitudeClient","instanceName","_instanceName","_legacyStorageSuffix","_unsentEvents","_unsentIdentifys","_ua","_q","_sending","_updateScheduled","_onInit","_eventId","_identifyId","_lastEventTime","_newSession","_sequenceNumber","_sessionId","_isInitialized","_userAgent","apiKey","opt_userId","opt_config","opt_callback","_this","_storageSuffix","hasExistingCookie","deferInitialization","_deferInitialization","_parseConfig","_generateApiPropertiesTrackingConfig","_apiPropertiesTrackingOptions","tracking_options","_upgradeCookieData","_loadCookieData","_pendingReadStorage","initFromStorage","deviceId","_getDeviceIdFromUrlParam","_getUrlParams","userId","_unsetUTMParams","_trackParamsAndReferrer","event_properties","userProperties","user_properties","identifyGroups","_saveCookieData","_sendEventsIfReady","_loadSavedUnsentEvents","runQueuedFunctions","_migrateUnsentEvents","cb","_this2","all","AsyncStorage","then","values","unsentEventsString","itemsToSet","itemsToRemove","catch","_initUtmData","_saveReferrer","_getReferrer","_saveGclid","config","parseValidateAndLoad","inputValue","queue","_apiKeySet","methodName","savedUnsentEventsString","_getFromStorage","unsentEvents","_parseSavedUnsentEventsString","_setInStorage","events","isNewSession","onInit","getSessionId","nextEventId","nextIdentifyId","nextSequenceNumber","_unsentCount","sendEvents","bind","scope","cookieData","sessionId","lastEventTime","_getAndRemoveFromLocalStorage","apiKeySuffix","localStorageDeviceId","localStorageUserId","localStorageOptOut","localStorageSessionId","localStorageLastEventTime","localStorageEventId","localStorageIdentifyId","localStorageSequenceNumber","_getFromCookie","_loadCookieDataProps","legacyCookieData","eventId","identifyId","sequenceNumber","queryParams","cookieParams","rawCookie","fetchParam","utmSource","utmMedium","utmCampaign","utmTerm","utmContent","utmData","addIfNotNull","utmProperties","queryName","_sendParamsReferrerUserProperties","identify","referrer","search","urlParams","gclid","_getReferringDomain","referrerInfo","referring_domain","setDomain","_shouldDeferCall","setUserId","setGroup","groupType","_logEvent","setOptOut","enable","setSessionId","resetSessionId","regenerateDeviceId","setDeviceId","setUserProperties","sanitized","clearUserProperties","_convertProxyObjectToRealObject","proxy","identify_obj","reason","groupIdentify","group_type","group_name","setVersionName","versionName","eventType","apiProperties","groupProperties","timestamp","eventTime","osName","osVersion","deviceModel","event","device_id","user_id","event_id","session_id","event_type","_shouldTrackField","api_properties","library","sequence_number","group_properties","user_agent","_limitEventsQueued","field","fields","splice","logEvent","logEventWithTimestamp","logEventWithGroups","_isNumber","parseFloat","logRevenueV2","revenue_obj","logRevenue","product","special","removeEvents","maxEventId","maxIdentifyId","_removeEvents","eventQueue","maxId","filteredEvents","protocol","numEvents","mergedEvents","_mergeEventsAndIdentifys","eventsToSend","uploadTime","client","upload_time","checksum","ceil","eventIndex","identifyIndex","noIdentifys","noEvents","setGlobalUserProperties","__VERSION__","_initializationDeferred","enableTracking","Amplitude","_instances","getInstance","old","amplitude","newInstance","_iq","factory","changeDisplay","elem","isShown","classList","setView","is_loading","logged_in","user","creds","login_form","forms","instalogin","querySelectorAll","querySelector","innerText","elements","updateView","pk","checkLogin","onLoginSuccess","params","whenLogged","isCookie","onLoginError","alert","onclick","preventDefault","onsubmit","two_factor_required","two_factor_data","two_factor_code","prompt","challenge"],"mappings":"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"}